/*! For license information please see main.c170f08d.chunk.js.LICENSE.txt */
(this["webpackJsonp@covid-vax-bot/data-portal"]=this["webpackJsonp@covid-vax-bot/data-portal"]||[]).push([[0],{160:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},199:function(e,t){},201:function(e,t){},210:function(e,t,n){"use strict";n.r(t);var a=n(266),i=n(0),c=n.n(i),s=n(49),r=n.n(s),o=n(97),l=n(284),u=n(269),d=n(267),b=n(4),j=n(274),h=n(132),m=n(15),f=n(17),O=n(16),v=Object(O.createStore)("appState",{isAuthenticated:!1,isAuthorized:!0,accessToken:void 0,username:void 0,email:void 0,userDisplayName:void 0,branches:void 0,issues:void 0,repoFileData:void 0,globalFileData:void 0,mainBranch:void 0,fileChanges:[],currentLanguage:"en-us",toggleAddLocation:!1,toggleQualifier:!1,isEditable:!1}),p=Object(O.mutatorAction)("setBranchList",(function(e){if(e){var t=v();t.branches=e;var n=e.find((function(e){return"main"===e.name}));t.mainBranch=n}})),x=Object(O.mutatorAction)("setIssuesList",(function(e){e&&(v().issues=e)})),g=Object(O.mutatorAction)("handleCreatePR",(function(e){e&&alert("Checkout Github!")})),k=Object(O.mutatorAction)("setRepoFileData",(function(e){if(e){var t=v();t.repoFileData=e[0],t.globalFileData={customStrings:e[1],cdcStateNames:e[2],cdcStateLinks:e[3]}}})),y=Object(O.mutatorAction)("setCurrentLanguage",(function(e){e&&(v().currentLanguage=e.key)})),C=function(e){var t=e.replace(/_/g," ").toLowerCase().replace(/\b[a-z](?=[a-z]{2})/g,(function(e){return e.toUpperCase()}));return t.startsWith("us ")?t.replace("us ","US "):t},N=function(e){return btoa(unescape(encodeURIComponent(e)))},S=function(e){return decodeURIComponent(escape(atob(e)))},w=n(10),I=n(125),R=n(265),T=n(12),A=n(276),L=(n(160),n(2)),P=Object(m.a)((function(){var e=v(),t=Object(i.useState)([]),n=Object(w.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)([]),r=Object(w.a)(s,2),o=r[0],l=r[1];Object(i.useEffect)((function(){if(e.issues){var t=[],n=[];e.issues.forEach((function(e){var a=new Date(e.updated_at),i=e.labels.some((function(e){return"scrapped changes"===e.name.toLowerCase()}));e.pull_request?t.push({title:e.title,author:e.user.login,update:a.toLocaleString(),action:e}):i&&n.push({title:e.title,author:e.user.login,update:a.toLocaleString(),action:e})})),c(t),l(n)}}),[e.issues]);var u=[{key:"titleCol",name:"Title",fieldName:"title",minWidth:200,isResizable:!0},{key:"authorCol",name:"Author",fieldName:"author",minWidth:200,isResizable:!0},{key:"updateCol",name:"Last Update",fieldName:"update",minWidth:200,isResizable:!0},{key:"actionCol",name:"",ariaLabel:"Actions Column",fieldName:"action",minWidth:200,isResizable:!0,onRender:function(e,t,n){var a;return Object(L.jsxs)("a",{className:"tableActionLink",href:null===e||void 0===e||null===(a=e.action)||void 0===a?void 0:a.html_url,target:"_blank",rel:"noreferrer",children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid"}),"Approve"]})}}],d=[{key:"titleCol",name:"Title",fieldName:"title",minWidth:200,isResizable:!0},{key:"authorCol",name:"Author",fieldName:"author",minWidth:200,isResizable:!0},{key:"updateCol",name:"Last Update",fieldName:"update",minWidth:200,isResizable:!0},{key:"actionCol",name:"",ariaLabel:"Actions Column",fieldName:"action",minWidth:200,isResizable:!0,onRender:function(e,t,n){var a;return Object(L.jsxs)("a",{className:"tableActionLink",href:null===e||void 0===e||null===(a=e.action)||void 0===a?void 0:a.html_url,target:"_blank",rel:"noreferrer",children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid"}),"View"]})}}];return Object(L.jsx)("div",{className:"dashboardPageWrapper",children:Object(L.jsxs)("div",{className:"bodyContainer",children:[Object(L.jsx)("div",{className:"bodyHeader",children:Object(L.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(L.jsx)("div",{className:"breadCrumbs",children:"/ Dashboard"}),Object(L.jsx)("div",{className:"mainTitle",children:"Dashboard"})]})}),Object(L.jsx)("div",{className:"bodyContent",children:e.issues?Object(L.jsxs)("section",{children:[Object(L.jsx)("div",{className:"sectionHeader",children:"Pending PRs"}),Object(L.jsxs)("div",{className:"sectionContent",children:[Object(L.jsx)(R.a,{items:a,columns:u,setKey:"set",layoutMode:T.e.justified,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2}),!a.length&&Object(L.jsx)("div",{style:{textAlign:"center"},children:"No pending PRs at this time."})]}),Object(L.jsx)("div",{className:"sectionHeader",children:"Location Updates"}),Object(L.jsxs)("div",{className:"sectionContent",children:[Object(L.jsx)(R.a,{items:o,columns:d,setKey:"set",layoutMode:T.e.justified,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2}),!o.length&&Object(L.jsx)("div",{style:{textAlign:"center"},children:"No pending location updates at this time."})]})]}):Object(L.jsx)("section",{children:Object(L.jsx)(A.a,{description:"Loading content..."})})})]})})})),D=Object(i.memo)((function(){(new Date).getFullYear();return Object(L.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(L.jsxs)("div",{className:"appFooterRow",children:[Object(L.jsx)(F,{href:"https://go.microsoft.com/fwlink/?LinkId=521839",children:"Privacy & Cookies"})," | ",Object(L.jsx)(F,{href:"mailto:".concat("todo@todo.com"),children:"Contact Us"})," | ",Object(L.jsx)(F,{href:"https://github.com/microsoft/covid-vaccine-bot/blob/main/CODE_OF_CONDUCT.md",children:"Code of Conduct"})]})})})),F=Object(i.memo)((function(e){var t=e.children,n=e.href;return Object(L.jsx)("div",{className:"div",style:{cursor:"pointer",marginLeft:15,marginRight:15,display:"flex",alignContent:"center"},onClick:function(){return n&&window.open(n,"_blank")},children:t})})),E=n(281),z=n(273),H=n(264),W=n(51),q=n(8),B=n(271),G=n(263),_=n(134),K=n(40),U=function(e,t){var n=v(),a=n.globalFileData,i=n.currentLanguage,c=e?[].concat(Object(K.a)(Object.entries(e.strings.content)),Object(K.a)(Object.entries(a.customStrings.content))):Object(K.a)(Object.entries(a.customStrings.content));return(t?c.filter((function(e){var n=Object(w.a)(e,2),a=n[0];n[1];return a.includes(t.toLowerCase())})):c).map((function(e){var t=Object(w.a)(e,2);return{key:t[0],text:t[1][i]}}))[0].text},M=(n(162),function(e,t){if(e){var n,a=(null===e||void 0===e?void 0:e.value)||{},i=a.info,c=a.vaccination,s=(null===c||void 0===c||null===(n=c.content)||void 0===n?void 0:n.links)||{},r=s.info,o=s.scheduling_phone,l=s.eligibility_plan;return{details:i.content.name,regionType:i.content.type,info:(null===r||void 0===r?void 0:r.url)||"",workflow:"",scheduling:"",providers:"",eligibility:"",eligibilityPlan:(null===l||void 0===l?void 0:l.url)||"",schedulingPhone:(null===o||void 0===o?void 0:o.text)?function(e,t,n){return n?function(e,t){var n=v().repoFileData,a=null===n||void 0===n?void 0:n[e.value.info.path.split("/")[0]];return U(a,t)}(e,t):function(e,t){return U(e.value,t)}(e,t)}(e,o.text,t):""}}return{details:"",regionType:"",info:"",workflow:"",scheduling:"",providers:"",eligibility:"",eligibilityPlan:"",schedulingPhone:""}}),V=Object(m.a)((function(e){var t=e.onSubmit,n=e.onCancel,a=e.item,c=e.isRegion,s=Object(i.useState)(M(a,c)),r=Object(w.a)(s,2),o=r[0],l=r[1],d=Object(i.useRef)(o),b=a?"Edit location":"Add new location",j=Object(i.useCallback)((function(e,t){d.current=Object(q.a)(Object(q.a)({},d.current),{regionType:null===t||void 0===t?void 0:t.key}),l(Object(q.a)(Object(q.a)({},o),d.current))}),[o,d]),h=Object(i.useCallback)((function(e){var t=e.target.value;d.current=Object(q.a)(Object(q.a)({},d.current),Object(W.a)({},e.target.name,t)),l(Object(q.a)(Object(q.a)({},o),d.current))}),[o,d]);return Object(L.jsxs)("div",{className:"modalWrapper",children:[Object(L.jsx)("div",{className:"modalHeader",children:Object(L.jsx)("div",{className:"title",children:b})}),Object(L.jsxs)("div",{className:"modalBody",children:[Object(L.jsxs)("div",{className:"detailsGroup",children:[Object(L.jsx)(B.a,{label:"Details",name:"details",value:o.details,onChange:h}),Object(L.jsx)(u.a,{selectedKey:o.regionType,placeholder:"Region type",options:[{key:"state",text:"State"},{key:"territory",text:"Territory"},{key:"tribal_land",text:"Tribal land"},{key:"county",text:"County"},{key:"city",text:"City"}],onChange:j})]}),Object(L.jsx)(B.a,{label:"General information link for the region:",name:"info",value:o.info,onChange:h}),Object(L.jsx)(B.a,{label:"Link to an existing eligibility workflow tool:",name:"workflow",value:o.workflow,onChange:h}),Object(L.jsx)(B.a,{label:"Appointment registration scheduler:",name:"scheduling",value:o.scheduling,onChange:h}),Object(L.jsx)(B.a,{label:"List of scheduling providers and locations:",name:"providers",value:o.providers,onChange:h}),Object(L.jsx)(B.a,{label:"Eligibility criteria about the current phase:",name:"eligibility",value:o.eligibility,onChange:h}),Object(L.jsx)(B.a,{label:"Documentation describing the rollout phases in detail:",name:"eligibilityPlan",value:o.eligibilityPlan,onChange:h}),Object(L.jsx)(B.a,{label:"A scheduling hotline:",name:"schedulingPhone",value:o.schedulingPhone,onChange:h})]}),Object(L.jsxs)("div",{className:"modalFooter",children:[Object(L.jsx)(G.a,{text:"Submit",onClick:function(){return null===t||void 0===t?void 0:t(o)}}),Object(L.jsx)(_.a,{text:"Cancel",onClick:function(){return null===n||void 0===n?void 0:n()}})]})]})})),Q=n(11),J=function(e){return Y(e,"eligibility.question")},Y=function(e,t){var n=v(),a=n.globalFileData,i=n.currentLanguage,c=e?[].concat(Object(K.a)(Object.entries(e.value.strings.content)),Object(K.a)(Object.entries(a.customStrings.content))):Object(K.a)(Object.entries(a.customStrings.content));return(t?c.filter((function(e){var n=Object(w.a)(e,2),a=n[0];n[1];return a.includes(t)})):c).map((function(e){var t=Object(w.a)(e,2);return{key:t[0],text:t[1][i]}})).sort((function(e,t){return e.text>t.text?1:-1}))},X=(n(163),Object(m.a)((function(e){var t=e.selectedState,n=e.rowItems,a=e.isEditable,c=e.onRowItemRemove,s=e.onRowItemChange,r=Object(i.useRef)(function(e){var t=J(e),n=[],a=[];return t.forEach((function(e){var t=e.key.split("/")[1].split(".")[0];n.includes(t)||(n.push(t),a.push({key:t,text:C(t)}))})),a.sort((function(e,t){return e.text>t.text?1:-1}))}(t)),o=Object(i.useRef)(J(t)),d=Object(i.useRef)(function(e){return Y(e,"eligibility.moreinfo")}(t)),b=Object(i.useState)(function(e,t){return J(e).filter((function(e){return e.key.includes(t)}))}(t,n.item.tagKey)),j=Object(w.a)(b,2),h=j[0],m=j[1],f=Object(i.useState)(function(e,t){return Y(e,t)[0].text}(t,n.item.moreInfoKey)),O=Object(w.a)(f,2),v=O[0],p=O[1],x=Object(i.useState)(n.item.moreInfoUrl),g=Object(w.a)(x,2),k=g[0],y=g[1],N=Object(i.useRef)(n.item),S=Object(i.useCallback)((function(e,t){m(o.current.filter((function(e){return e.key.split("/")[1].split(".")[0]===t.key}))),p(""),y(""),N.current=Object(q.a)(Object(q.a)({},N.current),{key:"".concat(n.item.groupId,"-c19.eligibility.question/").concat(t.key),tagKey:t.key,qualifierId:void 0,text:"",moreInfoKey:"",moreInfoContent:""}),null===s||void 0===s||s(Object(q.a)(Object(q.a)({},n),{item:N.current}))}),[o,s,n]),I=Object(i.useCallback)((function(e,t){var a=t.key.replace("question","moreinfo").split("/")[1],i=d.current.find((function(e){return e.key.split("/")[1]===a}));p(i?i.text:""),N.current=Object(q.a)(Object(q.a)({},N.current),{qualifierId:t.key,text:t.text,moreInfoContent:null===i||void 0===i?void 0:i.text,moreInfoKey:(null===i||void 0===i?void 0:i.key)||t.key.replace("question","moreinfo")}),null===s||void 0===s||s(Object(q.a)(Object(q.a)({},n),{item:N.current}))}),[d,s,n]),R=Object(i.useCallback)((function(e,t){N.current=Object(q.a)(Object(q.a)({},N.current),{moreInfoContent:t}),null===s||void 0===s||s(Object(q.a)(Object(q.a)({},n),{item:N.current})),p(t)}),[s,n]),T=Object(i.useCallback)((function(e,t){N.current=Object(q.a)(Object(q.a)({},N.current),{moreInfoUrl:t}),null===s||void 0===s||s(Object(q.a)(Object(q.a)({},n),{item:N.current})),y(t)}),[s,n]);return Object(L.jsxs)("div",{className:"phaseDetailRow",style:{pointerEvents:a?"unset":"none"},children:[Object(L.jsxs)("div",{className:"mainRow",children:[Object(L.jsx)(u.a,{options:r.current,defaultSelectedKey:n.item.tagKey,placeholder:"Tag",className:"tagDropdown",styles:{root:{minWidth:250}},onChange:S}),Object(L.jsx)(u.a,{options:h,defaultSelectedKey:n.item.qualifierId,placeholder:"Qualifier",styles:{root:{width:"100%",minWidth:0}},onChange:I}),Object(L.jsx)(l.a,{iconProps:{iconName:"MoreVertical"},styles:{menuIcon:{visibility:"hidden",width:0,margin:0}},menuProps:{isBeakVisible:!1,directionalHint:Q.a.rightTopEdge,items:[{key:"removeRow",text:"Remove",onClick:function(){return null===c||void 0===c?void 0:c(n.item)}},{key:"details",text:"Details"}]},title:"More","aria-label":"More"})]}),Object(L.jsxs)("div",{className:"detailsRow",children:[Object(L.jsx)(B.a,{placeholder:"More info text",multiline:!0,autoAdjustHeight:!0,resizable:!1,styles:{root:{width:"calc(100% - 32px)",padding:"5px 0"}},value:v,onChange:R}),Object(L.jsx)(B.a,{placeholder:"More info url",styles:{root:{width:"calc(100% - 32px)",padding:"5px 0"}},value:k,onChange:T})]})]})}))),Z=(n(69),[{key:"question",name:"Question",fieldName:"text",minWidth:200,isResizable:!1,isMultiline:!0}]),$=Object(m.a)((function(e){var t=v(),n=t.globalFileData,a=t.currentLanguage,c=t.repoFileData,s=t.isEditable,r=e.isRegion,o=e.value,l=e.selectedState,u=Object(i.useState)([]),d=Object(w.a)(u,2),b=d[0],j=d[1],h=Object(i.useState)([]),m=Object(w.a)(h,2),f=m[0],O=m[1];Object(i.useEffect)((function(){if(c){var e=[],t=[],i=c[l.key];i.vaccination.content.phases.forEach((function(c){var s=!r&&o.value.id!==c.id,l=!1;l=r?o.phase===c.id:c.id===i.vaccination.content.activePhase,e.push({key:c.id+e.length,name:c.label,startIndex:t.length,count:c.qualifications.length,isCollapsed:s,data:{keyId:c.id,isActive:l}}),c.qualifications.forEach((function(e){var s=String(e.question).toLowerCase(),r="*Translation not found* (".concat(s,")");i.strings&&i.strings.content[s]?r=i.strings.content[s][a]||r:n.customStrings.content[s]&&(r=n.customStrings.content[s][a]||r),t.push({key:c.id+"-"+s,text:r,moreInfoKey:(null===e||void 0===e?void 0:e.moreInfoText)?e.moreInfoText.toLowerCase():"",moreInfoContent:"",moreInfoUrl:e.moreInfoUrl,qualifierId:s,tagKey:s.split("/")[1].split(".")[0],groupId:c.id})}))})),o.isNew&&e.push({key:o.keyId+e.length,name:"Phase ".concat(o.value.id),startIndex:t.length,count:o.qualifications.length,isCollapsed:!1,data:{keyId:o.value.id,isActive:o.isActive}}),j(e),O(t)}}),[c,n,l,a,r,o]);var p=Object(i.useCallback)((function(e){for(var t=[],n=[],a=f.map((function(t){return t.key.startsWith(e)})).lastIndexOf(!0)+1,i={key:"".concat(e,"-c19.eligibility.question/new_qualifier"),text:"",moreInfoKey:"",moreInfoUrl:"",qualifierId:"c19.eligibility.question/new_qualifier",tagKey:"new_tagKey",groupId:e},c=0;c<f.length;c++)c===a?(t.push(i),t.push(f[c])):t.push(f[c]);a===f.length&&t.push(i),b.forEach((function(e){n.push(Object(q.a)(Object(q.a)({},e),{startIndex:t.findIndex((function(t){return t.groupId===e.data.keyId})),count:t.filter((function(t){return t.groupId===e.data.keyId})).length}))})),j(n),O(t)}),[f,b]),x=Object(i.useCallback)((function(e){var t=f.filter((function(t){return t.key!==e.key})),n=[];b.forEach((function(e){n.push(Object(q.a)(Object(q.a)({},e),{startIndex:t.findIndex((function(t){return t.groupId===e.data.keyId})),count:t.filter((function(t){return t.groupId===e.data.keyId})).length}))})),j(n),O(t)}),[f,b]),g=Object(i.useCallback)((function(e){var t=f.filter((function(t){return t.groupId!==e})),n=[];b.filter((function(t){return t.data.keyId!==e})).forEach((function(e){n.push(Object(q.a)(Object(q.a)({},e),{startIndex:t.findIndex((function(t){return t.groupId===e.data.keyId})),count:t.filter((function(t){return t.groupId===e.data.keyId})).length}))})),j(n),O(t)}),[f,b]),k=function(e){return function(){e.onToggleCollapse(e.group)}};return Object(L.jsx)("div",{className:"phaseGridContainer",children:Object(L.jsx)(R.a,{indentWidth:0,items:f,groups:b,columns:Z,groupProps:{showEmptyGroups:!0,onRenderHeader:function(e){if(null===e||void 0===e?void 0:e.group){var t=e.group;return Object(L.jsxs)("div",{className:"phaseGroupHeader",children:[Object(L.jsxs)("div",{className:"groupHeaderLabel",onClick:k(e),children:[Object(L.jsx)(I.a,{iconName:t.isCollapsed?"ChevronRight":"ChevronDown",className:"groupToggleIcon"}),t.name?Object(L.jsxs)("span",{children:[t.name," ",Object(L.jsxs)("small",{children:["(",t.data.keyId,")"]})]}):"Phase ".concat(t.data.keyId)]}),Object(L.jsx)("div",{className:"groupHeaderButtons",children:s?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"addQualifierGroup",onClick:function(){return p(t.data.keyId)},children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Qualifier"]}),Object(L.jsxs)("div",{className:"removePhaseGroup",onClick:function(){return g(t.data.keyId)},children:[Object(L.jsx)(I.a,{iconName:"Blocked2Solid",style:{color:"#d13438"}}),"Remove"]}),t.data.isActive?Object(L.jsxs)("div",{className:"activeGroup",children:[Object(L.jsx)(I.a,{iconName:"CircleFill",style:{color:"#00b7c3"}}),"Active Phase"]}):Object(L.jsxs)("div",{className:"activeGroup",children:[Object(L.jsx)(I.a,{iconName:"CircleRing",style:{color:"#00b7c3"}}),"Set as Active"]})]}):Object(L.jsx)(L.Fragment,{children:t.data.isActive&&Object(L.jsxs)("div",{className:"activeGroup",children:[Object(L.jsx)(I.a,{iconName:"CircleFill",style:{color:"#00b7c3"}}),"Active Phase"]})})})]})}return null}},onRenderRow:function(e){return e?Object(L.jsx)(X,{rowItems:e,selectedState:l,isEditable:s,onRowItemRemove:x}):null},isHeaderVisible:!1,checkboxVisibility:2,constrainMode:1,selectionMode:1,onShouldVirtualize:function(){return!1}})})})),ee=n(280),te=(n(164),Object(m.a)((function(e){var t=e.onSubmit,n=e.onCancel,a=Object(i.useState)({}),c=Object(w.a)(a,2),s=c[0],r=c[1],o=Object(i.useRef)(s),l=Object(i.useCallback)((function(e){var t=e.target.value;o.current=Object(q.a)(Object(q.a)({},o.current),Object(W.a)({},e.target.name,t)),r(Object(q.a)(Object(q.a)({},s),o.current))}),[s,o]),u=Object(i.useCallback)((function(e,t){o.current=Object(q.a)(Object(q.a)({},o.current),{isActive:t}),r(Object(q.a)(Object(q.a)({},s),o.current))}),[s,o]);return Object(L.jsxs)("div",{className:"modalWrapper",children:[Object(L.jsx)("div",{className:"modalHeader",children:Object(L.jsx)("div",{className:"title",children:"New Phase"})}),Object(L.jsxs)("div",{className:"modalBody",children:[Object(L.jsx)(B.a,{label:"Phase Id:",name:"phaseId",value:s.phaseId,onChange:l}),Object(L.jsx)(B.a,{label:"Phase Name:",name:"name",value:s.name,onChange:l}),Object(L.jsx)(ee.a,{label:"Active",onChange:u})]}),Object(L.jsxs)("div",{className:"modalFooter",children:[Object(L.jsx)(G.a,{text:"Submit",onClick:function(){return null===t||void 0===t?void 0:t(s)}}),Object(L.jsx)(_.a,{text:"Cancel",onClick:function(){return null===n||void 0===n?void 0:n()}})]})]})}))),ne=Object(m.a)((function(e){var t=Object(i.useState)([]),n=Object(w.a)(t,2),a=n[0],c=n[1],s=Object(i.useRef)([]),r=Object(i.useState)({isRegion:!1,value:null,selectedState:null}),o=Object(w.a)(r,2),l=o[0],u=o[1],d=Object(H.a)(!1),b=Object(w.a)(d,2),j=b[0],h=b[1],m=h.setTrue,f=h.setFalse,O=Object(H.a)(!1),p=Object(w.a)(O,2),x=p[0],g=p[1],k=g.setTrue,y=g.setFalse,N=Object(i.useRef)(null),S=v(),A=e.selectedState,P=e.onNavigateBack,D=[{key:"regionCol",name:"Region",fieldName:"name",minWidth:200,isResizable:!0},{key:"activePhaseCol",name:"Active Phase ID",fieldName:"phase",minWidth:200,isResizable:!0},{key:"editCol",name:"",fieldName:"editLocation",minWidth:50,isResizable:!1}].filter((function(e){return!!S.isEditable||"editCol"!==e.key})),F=Object(i.useState)(ae(A)),W=Object(w.a)(F,2),q=W[0],B=W[1];Object(i.useEffect)((function(){if((null===A||void 0===A?void 0:A.regions)>0){var e=[];Object.entries(A.value.regions).forEach((function(t){var n=Object(w.a)(t,2),a=n[0],i=n[1],c=i;e.push({key:a,name:C(a),value:i,phase:c.vaccination.content.activePhase?c.vaccination.content.activePhase:A.value.vaccination.content.activePhase})})),c(e),s.current=e}}),[A,s]);var G=Object(i.useCallback)((function(e,t){u({isRegion:e,value:t,selectedState:A})}),[A]),_=Object(i.useCallback)((function(e){f()}),[f]),K=Object(i.useCallback)((function(e){N.current=null!==e&&void 0!==e?e:null,m()}),[m]),U=Object(i.useCallback)((function(e,t,n){var a=e[null===n||void 0===n?void 0:n.fieldName];return"editCol"===(null===n||void 0===n?void 0:n.key)?S.isEditable?Object(L.jsx)(I.a,{iconName:"Edit",className:"editIcon",onClick:function(){return K(e)}}):null:Object(L.jsx)("span",{children:a})}),[K,S.isEditable]),M=Object(i.useCallback)((function(e,t){c(t?s.current.filter((function(e){return e.name.toLowerCase().indexOf(t)>-1})):s.current)}),[s]),Q=Object(i.useCallback)((function(e){y();var t=q;t.push({key:String(e.phaseId)+q.length,keyId:e.name+(e.isActive?" (active)":""),name:e.name+(e.isActive?" (active)":""),qualifications:0,value:{id:e.phaseId,qualifications:[]},isActive:e.isActive,isNew:!0}),B(t)}),[q,B,y]);return Object(L.jsxs)("div",{className:"bodyContainer",children:[Object(L.jsx)("div",{className:"bodyHeader subContent",children:Object(L.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(L.jsxs)("div",{className:"breadCrumbs",children:[Object(L.jsxs)("span",{className:"crumbLink",onClick:P,children:["/ Locations"," "]}),l.value?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("span",{className:"crumbLink",onClick:function(){return u({isRegion:!1,value:null,selectedState:null})},children:["/ ",A.text+" "]}),l.isRegion?Object(L.jsxs)(L.Fragment,{children:["/ ",l.value.name]}):Object(L.jsx)(L.Fragment,{children:"/ Phase Overview"})]}):Object(L.jsxs)(L.Fragment,{children:["/ ",A.text]})]}),Object(L.jsx)("div",{className:"mainTitle",children:l.value?Object(L.jsx)(L.Fragment,{children:l.isRegion?Object(L.jsxs)(L.Fragment,{children:[l.value.name," Region Phase Overview"]}):Object(L.jsxs)(L.Fragment,{children:[A.text," Phase Overview"]})}):Object(L.jsx)(L.Fragment,{children:A.text})})]})}),l.value?Object(L.jsx)("div",{className:"bodyContent",children:Object(L.jsx)("section",{children:Object(L.jsx)($,{isRegion:l.isRegion,value:l.value,selectedState:A})})}):Object(L.jsxs)("div",{className:"bodyContent",children:[Object(L.jsx)("section",{children:A.value.vaccination.content.phases.length>0?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"listTitle",children:"Phases"}),Object(L.jsxs)("div",{className:"searchRow",children:[Object(L.jsx)("div",{}),S.isEditable&&Object(L.jsxs)("div",{className:"addLocationHeaderButton",onClick:k,children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Phase"]})]}),Object(L.jsx)(R.a,{items:q,columns:[{key:"idCol",name:"Phase ID",fieldName:"keyId",minWidth:50,maxWidth:200,isResizable:!1},{key:"nameCol",name:"Name",fieldName:"name",minWidth:200,isResizable:!1},{key:"qualCol",name:"# of qualifications",fieldName:"qualifications",minWidth:200,isResizable:!1}],setKey:"set",layoutMode:T.e.justified,checkboxVisibility:2,onItemInvoked:function(e){return G(!1,e)}})]}):Object(L.jsx)("div",{children:"No phases available at this time."})}),Object(L.jsx)("section",{children:A.regions>0?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"listTitle",children:"Sublocation"}),Object(L.jsxs)("div",{className:"searchRow",children:[Object(L.jsx)(E.a,{styles:{root:{width:400}},placeholder:"Search",onChange:function(e,t){return M(e,t)}}),S.isEditable&&Object(L.jsxs)("div",{className:"addLocationHeaderButton",onClick:function(){return K(null)},children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Sublocation"]})]}),Object(L.jsx)(R.a,{items:a,columns:D,setKey:"set",layoutMode:T.e.justified,selectionPreservedOnEmptyClick:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2,onItemInvoked:function(e){return G(!0,e)},onRenderItemColumn:U,className:"locationDetailsList"})]}):Object(L.jsx)("div",{children:"No regions available at this time."})})]}),Object(L.jsx)(z.a,{isOpen:j,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(L.jsx)(V,{item:N.current,onCancel:f,onSubmit:_,isRegion:!0})}),Object(L.jsx)(z.a,{isOpen:x,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(L.jsx)(te,{onCancel:y,onSubmit:Q})})]})})),ae=function(e){return e.value.vaccination.content.phases.map((function(t,n){var a,i=e.value.vaccination.content.activePhase;return{key:String(t.id)+n,keyId:String(t.id)+(t.id===i?" (active)":""),name:C(null!==(a=t.label)&&void 0!==a?a:t.id)+(t.id===i?" (active)":""),qualifications:t.qualifications.length,value:t,isNew:!1}}))},ie=Object(m.a)((function(e){var t=e.onSelectedItem,n=Object(H.a)(!1),a=Object(w.a)(n,2),c=a[0],s=a[1],r=s.setTrue,o=s.setFalse,l=Object(i.useState)([]),u=Object(w.a)(l,2),d=u[0],b=u[1],j=Object(i.useRef)([]),h=Object(i.useRef)(null),m=v(),f=[{key:"stateCol",name:"State",fieldName:"text",minWidth:200,isResizable:!0},{key:"regionCol",name:"Sublocations",fieldName:"regions",minWidth:200,isResizable:!0},{key:"editCol",name:"",fieldName:"editLocation",minWidth:50,isResizable:!1}].filter((function(e){return!!m.isEditable||"editCol"!==e.key}));Object(i.useEffect)((function(){if(m.repoFileData){var e=[];Object.entries(m.repoFileData).forEach((function(t){var n,a,i=Object(w.a)(t,2),c=i[0],s=i[1],r=null===s||void 0===s||null===(n=s.info)||void 0===n?void 0:n.content.id,o=null===m||void 0===m||null===(a=m.globalFileData)||void 0===a?void 0:a.cdcStateNames.content,l=o["cdc/".concat(r,"/state_name")]&&o["cdc/".concat(r,"/state_name")][m.currentLanguage]&&""!==o["cdc/".concat(r,"/state_name")][m.currentLanguage].trim()?o["cdc/".concat(r,"/state_name")][m.currentLanguage]:"*Translation Not Found* (".concat(r,")");e.push({key:c,text:l,regions:(null===s||void 0===s?void 0:s.regions)?Object.keys(s.regions).length:0,value:s})})),b(e),j.current=e}}),[m.repoFileData,m.globalFileData,m.currentLanguage,j]);var O=Object(i.useCallback)((function(e,t){b(t?j.current.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1})):j.current)}),[j]),p=Object(i.useCallback)((function(e){t(e)}),[t]),x=Object(i.useCallback)((function(e){o()}),[o]),g=Object(i.useCallback)((function(e){h.current=null!==e&&void 0!==e?e:null,r()}),[r]),k=Object(i.useCallback)((function(e,t,n){var a=e[null===n||void 0===n?void 0:n.fieldName];return"editCol"===(null===n||void 0===n?void 0:n.key)?m.isEditable?Object(L.jsx)(I.a,{iconName:"Edit",className:"editIcon",onClick:function(){return g(e)}}):null:Object(L.jsx)("span",{children:a})}),[g,m.isEditable]);return Object(L.jsxs)("div",{className:"bodyContainer",children:[Object(L.jsx)("div",{className:"bodyHeader",children:Object(L.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(L.jsx)("div",{className:"breadCrumbs",children:"/ Locations"}),Object(L.jsx)("div",{className:"mainTitle",children:"Locations"})]})}),Object(L.jsx)("div",{className:"bodyContent",children:m.repoFileData?Object(L.jsxs)("section",{children:[Object(L.jsxs)("div",{className:"searchRow",children:[Object(L.jsx)(E.a,{styles:{root:{width:400}},placeholder:"Search",onChange:function(e,t){return O(e,t)}}),m.isEditable&&Object(L.jsxs)("div",{className:"addLocationHeaderButton",onClick:function(){return g(null)},children:[Object(L.jsx)(I.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Location"]})]}),Object(L.jsx)(R.a,{items:d,columns:f,setKey:"set",layoutMode:T.e.justified,selectionPreservedOnEmptyClick:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2,onItemInvoked:p,onRenderItemColumn:k,className:"locationDetailsList"})]}):Object(L.jsx)("section",{children:Object(L.jsx)(A.a,{description:"Loading content..."})})}),Object(L.jsx)(z.a,{isOpen:c,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(L.jsx)(V,{item:h.current,onCancel:o,onSubmit:x})})]})})),ce=Object(m.a)((function(){var e=Object(i.useState)(null),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(i.useCallback)((function(){a(null)}),[]);return Object(L.jsx)("div",{className:"locationPageContainer",children:n?Object(L.jsx)(ne,{selectedState:n,onNavigateBack:c}):Object(L.jsx)(ie,{onSelectedItem:a})})})),se=Object(O.action)("loginUser"),re=(n(165),Object(m.a)((function(){return Object(L.jsx)("div",{className:"loginPageContainer",children:Object(L.jsxs)("div",{className:"loginContainer",children:[Object(L.jsx)("h3",{children:"Data Composer"}),Object(L.jsx)(_.a,{text:"Login with Github",onClick:se})]})})}))),oe=(n(166),Object(m.a)((function(){var e=v(),t=e.globalFileData,n=e.currentLanguage,a=Object(i.useState)([]),c=Object(w.a)(a,2),s=c[0],r=c[1],o=Object(i.useState)([]),l=Object(w.a)(o,2),u=l[0],d=l[1];Object(i.useEffect)((function(){if(null===t||void 0===t?void 0:t.customStrings){var e=[],a=[],i=[],c=[],s=t.customStrings.content;Object.keys(s).filter((function(e){return e.includes("eligibility.question")})).forEach((function(t){var r=t.split("/")[1].split(".");if(e.includes(r[0])){var o=i.findIndex((function(e){return e.key===r[0]}));i[o].count++}else e.push(r[0]),i.push({key:r[0],name:C(r[0]),startIndex:c.length,count:1,isCollapsed:!0});a.includes(t)||(a.push(t),c.push({key:t,text:s[t][n]?s[t][n]:"*Translation Not Found* (".concat(n,")")}))})),i[0].isCollapsed=!1,r(i),d(c)}}),[t,n,r,d]);return Object(L.jsxs)("div",{className:"qualifierPanelContainer",children:[Object(L.jsx)("div",{className:"panelHeader",children:Object(L.jsx)("div",{className:"panelHeaderTitle",children:"Qualifiers"})}),Object(L.jsx)("div",{className:"panelBody",children:Object(L.jsx)("section",{children:Object(L.jsx)(R.a,{items:u,groups:s,columns:[{key:"questionColKey",name:"Question",fieldName:"text",minWidth:100,isResizable:!1}],groupProps:{showEmptyGroups:!1},compact:!0,isHeaderVisible:!1,checkboxVisibility:2,className:"qualifierGroupItem"})})})]})}))),le=(n(167),Object(m.a)((function(){return Object(L.jsx)("div",{className:"translatePageContainer",children:Object(L.jsxs)("div",{className:"bodyContainer",children:[Object(L.jsx)("div",{className:"bodyHeader",children:Object(L.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(L.jsx)("div",{className:"breadCrumbs",children:"/ Translate"}),Object(L.jsx)("div",{className:"mainTitle",children:"Translate"})]})}),Object(L.jsx)("div",{className:"bodyContent",children:Object(L.jsx)("section",{children:"this is where contents go"})})]})})}))),ue=(n(168),n(169),Object(m.a)((function(){var e=v(),t="en-us,ko-kr,vi-vn,zh-cn,es-us,de-de,es-es,fi-fi,fr-fr,he-il,it-it,ja-jp,pt-pt,sv-se,th-th".split(",").map((function(e){return{key:e,text:(t=e,n=e,new Intl.DisplayNames([t],{type:"language"}).of(n))};var t,n}));return Object(L.jsxs)("div",{className:"rootContentWrapper",children:[v().isAuthenticated?Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(f.d,{children:[Object(L.jsx)(f.b,{exact:!0,path:"/",children:Object(L.jsxs)("div",{className:"appPageContainer",children:[Object(L.jsxs)("div",{className:"appHeaderWrapper",children:[Object(L.jsxs)("div",{className:"appHeaderContainer",children:[Object(L.jsx)(l.a,{iconProps:{iconName:"waffle"},title:"Apps",styles:{icon:{fontSize:"24px",color:"white"},rootHovered:{backgroundColor:"transparent"},rootPressed:{backgroundColor:"transparent"}}}),Object(L.jsx)("div",{className:"appHeaderTitle",children:"Data Composer"})]}),Object(L.jsxs)("div",{className:"appHeaderPersona",children:[Object(L.jsx)("div",{children:Object(L.jsx)(u.a,{defaultSelectedKey:e.currentLanguage,onChange:function(e,t){return y(t)},ariaLabel:"Pick Language",options:t,styles:{dropdown:{border:"none"},title:{fontSize:"14px",color:"white !important",border:"none",backgroundColor:"transparent"},caretDown:{color:"white !important",fontSize:"14px"},dropdownOptionText:{fontSize:"14px"},root:{selectors:{":hover":{backgroundColor:"rgba(0,0,0,.25);"}}}}})}),Object(L.jsx)("div",{className:"appHeaderUsername",children:e.userDisplayName}),Object(L.jsx)(d.a,{text:e.userDisplayName,size:b.c.size32,hidePersonaDetails:!0})]})]}),Object(L.jsx)("div",{className:"appBodyWrapper",children:v().isAuthorized?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"appBodyLeft",children:Object(L.jsxs)(j.a,{children:[Object(L.jsx)(h.a,{headerText:"Dashboard",children:Object(L.jsx)(P,{})}),Object(L.jsx)(h.a,{headerText:"Locations",children:Object(L.jsx)(ce,{})}),Object(L.jsx)(h.a,{headerText:"Translate",children:Object(L.jsx)(le,{})})]})}),e.toggleQualifier&&Object(L.jsx)("div",{className:"appBodyRight",children:Object(L.jsx)(oe,{})})]}):Object(L.jsx)("div",{className:"appBodyLeft",children:Object(L.jsxs)("div",{className:"dashboardPageWrapper",children:[Object(L.jsx)("div",{className:"bodyContainer",children:Object(L.jsx)("div",{className:"bodyHeader",children:Object(L.jsx)("div",{className:"bodyHeaderTitle",children:Object(L.jsx)("div",{className:"mainTitle",children:"Welcome!"})})})}),Object(L.jsx)("section",{style:{width:"70%",margin:"0px auto"},children:Object(L.jsxs)("p",{children:["Thank you for your interest in helping to manage the data, unfortunately right now access to this tool requires collaborator permissions on"," ",Object(L.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.github.com/".concat("","/").concat(""),children:"this repo"}),". Feel free to request access over on GitHub!"]})})]})})})]})}),Object(L.jsx)(f.b,{path:"*",children:Object(L.jsx)("div",{children:"404 page not found."})})]})}):Object(L.jsxs)(f.d,{children:[Object(L.jsx)(f.b,{exact:!0,path:"/",children:Object(L.jsx)(re,{})}),Object(L.jsx)(f.b,{path:"*",children:Object(L.jsx)(f.a,{to:"/"})})]}),Object(L.jsx)(D,{})]})}))),de=n(19),be=n.n(de),je=n(31),he=Object(O.action)("createPR",(function(e){return{fileData:e}})),me=Object(O.action)("getRepoFileData"),fe=Object(O.action)("initializeGitData"),Oe=Object(O.mutatorAction)("setUserAuthData",(function(e){if(e){var t=v();t.accessToken=e.accessToken,t.email=e.email,t.isAuthenticated=e.isAuthenticated,t.userDisplayName=e.userDisplayName,t.username=e.username}})),ve=Object(O.mutatorAction)("setUserNoAccess",(function(){v().isAuthorized=!1})),pe=n(66),xe=(n(175),function(){var e=Object(je.a)(be.a.mark((function e(){var t,n,a,i,c,s,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,pe.a.apps.length||pe.a.initializeApp({apiKey:"",authDomain:""}),(n=new pe.a.auth.GithubAuthProvider).addScope("repo"),e.next=6,pe.a.auth().signInWithPopup(n);case 6:return(a=e.sent)&&(r=a.credential,t={isAuthenticated:!0,accessToken:r.accessToken,email:null===(i=a.user)||void 0===i?void 0:i.email,userDisplayName:null===(c=a.user)||void 0===c?void 0:c.displayName,username:null===(s=a.additionalUserInfo)||void 0===s?void 0:s.username}),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ge=n(133),ke=n(67),ye=n.n(ke),Ce=function(e){var t={};return e.forEach((function(e){var n=Object.keys(e).find((function(e){return"String ID"===e.trim()})),a=e[n];delete e[n],t[a.toLowerCase()]=e})),t},Ne=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=t.split("/"),i=e;a.length>1;){var c=a,s=Object(ge.a)(c),r=s[0],o=s.slice(1);a=o,void 0===i[r]&&(i[r]={}),i=i[r]}return i[a[0]]?i[a[0]]=Object(q.a)(Object(q.a)({},i[a[0]]),n):i[a[0]]={},e},Se=function(){var e=Object(je.a)(be.a.mark((function e(t,n){var a,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t),{method:"GET",headers:{Authorization:"token ".concat(n)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=Object(je.a)(be.a.mark((function e(t){var n,a,i,c,s,r,o,l,u,d,b,j,h,m,f,O,p,x,g,k,y,C,w,I,R,T,A,L,P,D,F,E,z=arguments;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=z.length>1&&void 0!==z[1]?z[1]:void 0,a=v(),i="",c="",e.t0=t,e.next="checkAccess"===e.t0?7:"getBranches"===e.t0?12:"getPullRequests"===e.t0?18:"getIssues"===e.t0?24:"getRepoFileData"===e.t0?32:"createPR"===e.t0?77:95;break;case 7:return e.next=9,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/collaborators/").concat(a.username),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 9:return s=e.sent,e.abrupt("return",s);case 12:return e.next=14,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/branches"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 14:return r=e.sent,e.next=17,r.json();case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/pulls"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 20:return o=e.sent,e.next=23,o.json();case 23:return e.abrupt("return",e.sent);case 24:return e.next=26,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/issues"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 26:return l=e.sent,e.next=29,l.json();case 29:return e.abrupt("return",e.sent);case 32:return e.next=34,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/contents/packages/plans/data"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 34:return u=e.sent,e.next=37,u.json();case 37:return d=e.sent,b=d.find((function(e){return"policies"===e.name})).git_url,e.next=41,fetch("".concat(b,"?recursive=true"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 41:return j=e.sent,e.next=44,j.json();case 44:return h=e.sent,m={},h.tree.forEach(function(){var e=Object(je.a)(be.a.mark((function e(t){var n,i,c,s,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("tree"!==t.type){e.next=4;break}Ne(m,t.path),e.next=22;break;case 4:return n=t.path.lastIndexOf("/"),i=t.path.substring(0,n),c=t.path.substring(n+1),s=c.split(".")[0],r={},e.next=11,Se(String(t.url),String(a.accessToken));case 11:o=e.sent,e.t0=c.split(".")[1].toLowerCase(),e.next="json"===e.t0?15:"md"===e.t0?17:"csv"===e.t0?19:21;break;case 15:return r[s]={name:c,type:s,sha:t.sha,url:t.url,path:t.path,content:JSON.parse(S(o.content))},e.abrupt("break",21);case 17:return r.desc_md={name:c,type:s,sha:t.sha,url:t.url,path:t.path,content:S(o.content)},e.abrupt("break",21);case 19:return r.strings={name:c,type:s,sha:t.sha,url:t.url,path:t.path,content:Ce(ye()(S(o.content),{columns:!0}))},e.abrupt("break",21);case 21:r!=={}&&Ne(m,i,r);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=d.find((function(e){return"localization"===e.name})).git_url,e.next=50,fetch("".concat(f,"?recursive=true"),{method:"GET",headers:{Authorization:"token ".concat(a.accessToken)}});case 50:return O=e.sent,e.next=53,O.json();case 53:return p=e.sent,x=p.tree.find((function(e){return"custom-strings.csv"===e.path})),g=p.tree.find((function(e){return"cdc-state-names.csv"===e.path})),k=p.tree.find((function(e){return"cdc-state-links.csv"===e.path})),y={},C={},w={},e.next=62,Se(String(x.url),String(a.accessToken));case 62:return I=e.sent,y=Ce(ye()(S(I.content),{columns:!0})),e.next=66,Se(String(g.url),String(a.accessToken));case 66:return R=e.sent,C=Ce(ye()(S(R.content),{columns:!0})),e.next=70,Se(String(k.url),String(a.accessToken));case 70:return T=e.sent,w=Ce(ye()(S(T.content),{columns:!0})),x.content=y,g.content=C,k.content=w,e.abrupt("return",[m,x,g,k]);case 77:if(!(null===a||void 0===a?void 0:a.mainBranch)){e.next=94;break}return A=null===a||void 0===a?void 0:a.mainBranch,L="refs/heads/".concat(a.username,"-policy-").concat(Date.now()),e.next=82,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/git/refs"),{method:"POST",headers:{Authorization:"token ".concat(a.accessToken)},body:JSON.stringify({ref:L,sha:A.commit.sha})});case 82:return P=e.sent,e.next=85,P.json();case 85:return D=e.sent,e.next=88,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/contents/packages/plans/data/policies/").concat(n.path),{method:"PUT",headers:{Authorization:"token ".concat(a.accessToken)},body:JSON.stringify({branch:L,message:"auto file creation",content:N("[FileContent]"),sha:n.sha})});case 88:return F=e.sent,e.next=91,fetch("https://api.github.com/repos/".concat(i,"/").concat(c,"/pulls"),{method:"POST",headers:{Authorization:"token ".concat(a.accessToken)},body:JSON.stringify({head:L,base:"main",title:"auto PR creation"})});case 91:return E=e.sent,console.log(D,F),e.abrupt("return",E.json());case 94:return e.abrupt("break",95);case 95:return e.abrupt("return",void 0);case 96:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(O.orchestrator)(se,Object(je.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:if(!(t=e.sent)){e.next=9;break}return Oe(t),e.next=7,we("checkAccess");case 7:e.sent.ok?fe():ve();case 9:case"end":return e.stop()}}),e)})))),Object(O.orchestrator)(he,function(){var e=Object(je.a)(be.a.mark((function e(t){var n,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileData,e.next=3,we("createPR",n);case 3:a=e.sent,g(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(O.orchestrator)(me,Object(je.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("getRepoFileData");case 2:t=e.sent,k(t);case 4:case"end":return e.stop()}}),e)})))),Object(O.orchestrator)(fe,Object(je.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("getBranches");case 2:return t=e.sent,p(t),e.next=6,we("getRepoFileData");case 6:return t=e.sent,k(t),e.next=10,we("getIssues");case 10:t=e.sent,x(t);case 12:case"end":return e.stop()}}),e)})))),Object(a.a)(),r.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(o.a,{children:Object(L.jsx)(ue,{})})}),document.getElementById("root"))},69:function(e,t,n){}},[[210,1,2]]]);
//# sourceMappingURL=main.c170f08d.chunk.js.map