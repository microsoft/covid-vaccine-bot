/*! For license information please see main.271a799c.chunk.js.LICENSE.txt */
(this["webpackJsonp@covid-vax-bot/data-portal"]=this["webpackJsonp@covid-vax-bot/data-portal"]||[]).push([[0],{168:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},175:function(e,t,n){},198:function(e,t){},200:function(e,t){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(276),i=n(0),c=n.n(i),o=n(56),r=n.n(o),s=n(101),l=n(6),u=n(295),d=n(300),b=n(286),j=n(299),f=n(280),h=n(277),v=n(5),m=n(278),g=n(287),p=n(138),O=n(285),k=n(262),x=n(15),y=n(21),C=n(8),N=Object(C.action)("loginUser"),w=Object(C.action)("reLoginUser"),D=Object(C.action)("createPR",(function(e){return{fileData:e}})),S=Object(C.action)("getRepoFileData"),L=Object(C.action)("initializeGitData"),F=Object(C.action)("loadPR",(function(e){return{prNumber:e}})),I=Object(C.action)("loadBranch",(function(e){return{branch:e}})),R=Object(C.action)("saveContinue"),P=n(3),T="dataComposer",_=function(){try{var e=localStorage.getItem(T);if(!e)return;return JSON.parse(e)}catch(t){return console.warn("Error loading state",t),void A()}},A=function(){localStorage.removeItem(T)},q=n(20),E={isAuthenticated:!1,isAuthorized:!0,accessToken:void 0,username:void 0,email:void 0,userDisplayName:void 0,branches:void 0,issues:[],repoFileData:void 0,initRepoFileData:void 0,globalFileData:void 0,initGlobalFileData:void 0,mainBranch:void 0,currentLanguage:"en-us",toggleQualifier:!1,isEditable:!0,pendingChanges:!1,isDataRefreshing:!1,prChanges:void 0,userWorkingBranch:void 0,userWorkingBranches:[],userAccessExpired:!1,isDataStale:!1,isSavingCommits:!1},K=Object(C.createStore)("appState",function(){var e=_();return Object(P.a)(Object(P.a)({},E),e)}()),B=Object(C.getRootStore)().get("appState");Object(q.autorun)((function(){B.accessToken&&function(e){try{var t=_(),n=JSON.stringify(Object(P.a)(Object(P.a)({},t),e));localStorage.setItem(T,n)}catch(a){console.warn("Error saving state",a),A()}}({accessToken:B.accessToken,isAuthorized:B.isAuthorized,isAuthenticated:B.isAuthenticated,userDisplayName:B.userDisplayName,username:B.username,email:B.email,userAccessExpired:B.userAccessExpired})}));var W=Object(C.mutatorAction)("setUserAccessToken",(function(e){K().accessToken=e})),z=Object(C.mutatorAction)("setUserAuthData",(function(e){if(e){var t=K();t.accessToken=e.accessToken,t.email=e.email,t.isAuthenticated=e.isAuthenticated,t.userDisplayName=e.userDisplayName,t.username=e.username}})),U=Object(C.mutatorAction)("setUserAccessExpired",(function(e){K().userAccessExpired=e})),H=Object(C.mutatorAction)("setUserNoAccess",(function(){K().isAuthorized=!1})),G=Object(C.mutatorAction)("logoutUser",(function(){A(),window.location.reload()})),M=n(12),Q=function(e){var t={};return e.forEach((function(e){var n=Object.keys(e).find((function(e){return"String ID"===e.trim()})),a=e[n];delete e[n],t[a.toLowerCase()]=e})),t},J=function(e){var t=e.replace(/_/g," ").toLowerCase().replace(/\b[a-z](?=[a-z]{2})/g,(function(e){return e.toUpperCase()}));return t.startsWith("us ")?t.replace("us ","US "):t.startsWith("st. ")?t.replace("st. ","St. "):t},V=function(e){return null===e||void 0===e?void 0:e.trim().replace(/[^a-z0-9\s]/gi,"").replace(/\s+/g,"_").toLowerCase()},Y=function(e){return"en-us,ko-kr,vi-vn,zh-cn,es-us,de-de,es-es,fi-fi,fr-fr,he-il,it-it,ja-jp,pt-pt,sv-se,th-th".split(",").map((function(e){return{key:e,text:Z(e,e)}})).filter((function(t){return t.key!==e}))},Z=function(e,t){return new Intl.DisplayNames([e],{type:"language"}).of(t)},$=function(e){return btoa(unescape(encodeURIComponent(e)))},X=function(e){return decodeURIComponent(escape(atob(e)))},ee=function(e){for(var t="en-us,ko-kr,vi-vn,zh-cn,es-us,de-de,es-es,fi-fi,fr-fr,he-il,it-it,ja-jp,pt-pt,sv-se,th-th".split(","),n=Object.keys(e),a="String ID,"+t.join(",")+"\n",i=function(){var n=o[c],i=[n];t.forEach((function(t){e[n][t]?i.push('"'.concat(e[n][t].replace(/"/g,'""'),'"')):i.push("")})),a+=i.join(",")+"\n"},c=0,o=n;c<o.length;c++)i();return a},te=Object(C.mutatorAction)("setIsDataRefreshing",(function(e){K().isDataRefreshing=e})),ne=Object(C.mutatorAction)("isDataStale",(function(e){K().isDataStale=e})),ae=Object(C.mutatorAction)("setPendingChanges",(function(e){K().pendingChanges=e})),ie=Object(C.mutatorAction)("setSavingCommitsFlag",(function(e){K().isSavingCommits=e})),ce=(Object(C.mutatorAction)("setGlobalAndRepoChanges",(function(){var e=K();e.initGlobalFileData=e.globalFileData,e.initRepoFileData=e.repoFileData})),Object(C.mutatorAction)("setBranchList",(function(e){if(e){var t=K();t.branches=e;var n=e.find((function(e){return"main"===e.name}));t.mainBranch=n}}))),oe=Object(C.mutatorAction)("setUserWorkingBranches",(function(e){e&&(K().userWorkingBranches=e)})),re=Object(C.mutatorAction)("setIssuesList",(function(e,t){e&&(K().issues=e,t&&t())})),se=Object(C.mutatorAction)("setLoadedPRData",(function(e){var t,n,a=K();e&&(a.loadedPRData=e.data,a.prChanges={last_commit:null===e||void 0===e||null===(t=e.commits)||void 0===t||null===(n=t.pop)||void 0===n?void 0:n.call(t)})})),le=Object(C.mutatorAction)("setUserWorkingBranch",(function(e){K().userWorkingBranch=e})),ue=Object(C.mutatorAction)("clearLoadedPRData",(function(){var e=K();e.pendingChanges=!1,e.prChanges=void 0,e.loadedPRData=void 0})),de=Object(C.mutatorAction)("setRepoFileData",(function(e){if(e){var t=K();t.repoFileData=e[0],t.globalFileData={customStrings:e[1],cdcStateNames:e[2],cdcStateLinks:e[3]}}})),be=Object(C.mutatorAction)("setInitRepoFileData",(function(e){if(e){var t=K();t.repoFileData=e[0],t.initRepoFileData=e[0],t.globalFileData={customStrings:e[1],cdcStateNames:e[2],cdcStateLinks:e[3]},t.initGlobalFileData={customStrings:e[1],cdcStateNames:e[2],cdcStateLinks:e[3]}}})),je=Object(C.mutatorAction)("setCurrentLanguage",(function(e){e&&(K().currentLanguage=e.key)})),fe=Object(C.mutatorAction)("updateLocationList",(function(e,t,n){if(e){var a=K(),i=function(e){var t=e.details.replace(/[^a-z0-9\s]/gi,"").replace(/\s/g,"_").toLowerCase();return{info:{content:{id:t,metadata:{code_alpha:t,code_numeric:0},name:e.details,type:e.regionType},name:"info.json",path:"".concat(t,"/info.json"),sha:"",type:"info",url:""},strings:{content:{}},vaccination:{content:{activePhase:"",links:Object(P.a)(Object(P.a)(Object(P.a)(Object(P.a)(Object(P.a)(Object(P.a)(Object(P.a)({},""!==(null===e||void 0===e?void 0:e.eligibility)&&{eligibility:{url:e.eligibility}}),""!==(null===e||void 0===e?void 0:e.eligibilityPlan)&&{eligibility_plan:{url:e.eligibilityPlan}}),""!==(null===e||void 0===e?void 0:e.info)&&{info:{url:e.info,text:"cdc/".concat(t,"/state_link")}}),""!==(null===e||void 0===e?void 0:e.providers)&&{providers:{url:e.providers,text:"c19.links/vax_providers"}}),""!==(null===e||void 0===e?void 0:e.workflow)&&{workflow:{url:e.workflow,text:"c19.links/vax_quiz"}}),""!==(null===e||void 0===e?void 0:e.scheduling)&&{scheduling:{url:e.scheduling,text:"c19.links/schedule_vax"}}),""!==(null===e||void 0===e?void 0:e.schedulingPhone)&&{scheduling_phone:{url:"tel:".concat(e.schedulingPhone),text:e.schedulingPhone}})},name:"vaccination.json",path:"".concat(t,"/vaccination.json"),sha:"",type:"vaccination",url:""}}}(e);if(a.pendingChanges=!0,t){var c=a.repoFileData[n.key];if(i.info.path="".concat(n.key,"/regions/").concat(i.info.path),i.vaccination.path="".concat(n.key,"/regions/").concat(i.vaccination.path),"noPhaseLabel"in i.vaccination.content?i.vaccination.content.noPhaseLabel=e.noPhaseLabel:i.vaccination.content=Object(P.a)(Object(P.a)({},i.vaccination.content),{},{noPhaseLabel:e.noPhaseLabel}),""!==e.info&&(i.vaccination.content.links.info.text="cdc/".concat(c.info.content.id,"/state_link")),""!==e.schedulingPhone){var o="c19.link/scheduling.phone.".concat(c.info.content.metadata.code_alpha,".").concat(i.info.content.id).toLowerCase();c.strings.content[o]=Object(P.a)(Object(P.a)({},c.strings.content[o]),{},Object(M.a)({},a.currentLanguage,e.schedulingPhone)),i.vaccination.content.links.scheduling_phone.text=o}if(""!==e.schedulingPhoneDesc){var r="c19.link/scheduling.phone.description.".concat(c.info.content.metadata.code_alpha,".").concat(i.info.content.id).toLowerCase();c.strings.content[r]=Object(P.a)(Object(P.a)({},c.strings.content[r]),{},Object(M.a)({},a.currentLanguage,e.schedulingPhoneDesc)),i.vaccination.content.links.scheduling_phone.description=r}c.regions?c.regions[i.info.content.id]=i:c.regions=Object(M.a)({},i.info.content.id,i),a.repoFileData=Object(P.a)({},a.repoFileData)}else{a.globalFileData.cdcStateNames.content["cdc/".concat(i.info.content.id,"/state_name")]=Object(P.a)(Object(P.a)({},a.globalFileData.cdcStateNames.content["cdc/".concat(i.info.content.id,"/state_name")]),{},Object(M.a)({},a.currentLanguage,e.details)),i.strings.path="".concat(i.info.content.id,"/").concat(i.info.content.id,".csv"),"noPhaseLabel"in i.vaccination.content?i.vaccination.content.noPhaseLabel=e.noPhaseLabel:i.vaccination.content=Object(P.a)(Object(P.a)({},i.vaccination.content),{},{noPhaseLabel:e.noPhaseLabel});var s={};if(""!==e.schedulingPhone){var l="c19.link/scheduling.phone.".concat(i.info.content.id).toLowerCase();s[l]=Object(P.a)(Object(P.a)({},s[l]),{},Object(M.a)({},a.currentLanguage,e.schedulingPhone)),i.vaccination.content.links.scheduling_phone.text=l}if(""!==e.schedulingPhoneDesc){var u="c19.link/scheduling.phone.description.".concat(i.info.content.id).toLowerCase();s[u]=Object(P.a)(Object(P.a)({},s[u]),{},Object(M.a)({},a.currentLanguage,e.schedulingPhoneDesc)),i.vaccination.content.links.scheduling_phone.description=u}i.strings.content=s,a.repoFileData[i.info.content.id]=i,a.repoFileData=Object(P.a)({},a.repoFileData)}}})),he=Object(C.mutatorAction)("deleteLocation",(function(e,t,n){var a,i,c=K();c.pendingChanges=!0,t&&n?null===(a=c.repoFileData[n.key])||void 0===a||(null===(i=a.regions)||void 0===i||delete i[e.key]):delete c.repoFileData[e.key],c.repoFileData=Object(P.a)({},c.repoFileData)})),ve=Object(C.mutatorAction)("updateLocationData",(function(e,t,n,a){if(e){var i=K();if(i.pendingChanges=!0,t){var c=i.repoFileData[a.key],o=c.regions[n.key];o.info.content.name=e.details,"noPhaseLabel"in o.vaccination.content?o.vaccination.content.noPhaseLabel=e.noPhaseLabel:o.vaccination.content=Object(P.a)(Object(P.a)({},o.vaccination.content),{},{noPhaseLabel:e.noPhaseLabel});var r="c19.link/scheduling.phone.".concat(c.info.content.metadata.code_alpha,".").concat(o.info.content.id).toLowerCase();if(""!==(null===e||void 0===e?void 0:e.schedulingPhone)&&(c.strings.content[r]=Object(M.a)({},i.currentLanguage,e.schedulingPhone)),""!==(null===e||void 0===e?void 0:e.eligibility)?o.vaccination.content.links.eligibility?o.vaccination.content.links.eligibility.url.toLowerCase()!==e.eligibility.toLowerCase()&&(o.vaccination.content.links.eligibility={url:e.eligibility}):o.vaccination.content.links.eligibility={url:e.eligibility}:delete o.vaccination.content.links.eligibility,""!==(null===e||void 0===e?void 0:e.eligibilityPlan)?o.vaccination.content.links.eligibility_plan?o.vaccination.content.links.eligibility_plan.url.toLowerCase()!==e.eligibilityPlan.toLowerCase()&&(o.vaccination.content.links.eligibility_plan={url:e.eligibilityPlan}):o.vaccination.content.links.eligibility_plan={url:e.eligibilityPlan}:delete o.vaccination.content.links.eligibility_plan,""!==(null===e||void 0===e?void 0:e.info)?o.vaccination.content.links.info?o.vaccination.content.links.info.url.toLowerCase()!==e.info.toLowerCase()&&(o.vaccination.content.links.info={url:e.info,text:"cdc/".concat(c.info.content.id,"/state_link")}):o.vaccination.content.links.info={url:e.info,text:"cdc/".concat(c.info.content.id,"/state_link")}:delete o.vaccination.content.links.info,""!==(null===e||void 0===e?void 0:e.providers)?o.vaccination.content.links.providers?o.vaccination.content.links.providers.url.toLowerCase()!==e.providers.toLowerCase()&&(o.vaccination.content.links.providers={url:e.providers,text:"c19.links/vax_providers"}):o.vaccination.content.links.providers={url:e.providers,text:"c19.links/vax_providers"}:delete o.vaccination.content.links.providers,""!==(null===e||void 0===e?void 0:e.workflow)?o.vaccination.content.links.workflow?o.vaccination.content.links.workflow.url.toLowerCase()!==e.workflow.toLowerCase()&&(o.vaccination.content.links.workflow={url:e.workflow,text:"c19.links/vax_quiz"}):o.vaccination.content.links.workflow={url:e.workflow,text:"c19.links/vax_quiz"}:delete o.vaccination.content.links.workflow,""!==(null===e||void 0===e?void 0:e.scheduling)?o.vaccination.content.links.scheduling?o.vaccination.content.links.scheduling.url.toLowerCase()!==e.scheduling.toLowerCase()&&(o.vaccination.content.links.scheduling={url:e.scheduling,text:"c19.links/schedule_vax"}):o.vaccination.content.links.scheduling={url:e.scheduling,text:"c19.links/schedule_vax"}:delete o.vaccination.content.links.scheduling,""!==(null===e||void 0===e?void 0:e.schedulingPhone)&&(c.strings.content[r]=Object(P.a)(Object(P.a)({},c.strings.content[r]),{},Object(M.a)({},i.currentLanguage,e.schedulingPhone)),o.vaccination.content.links.scheduling_phone?o.vaccination.content.links.scheduling_phone.url.toLowerCase()!=="tel:".concat(e.schedulingPhone).toLowerCase()&&(o.vaccination.content.links.scheduling_phone={url:"tel:".concat(e.schedulingPhone),text:r}):o.vaccination.content.links.scheduling_phone={url:"tel:".concat(e.schedulingPhone),text:r}),o.vaccination.content.links.scheduling_phone&&""!==e.schedulingPhoneDesc){var s="c19.link/scheduling.phone.description.".concat(c.info.content.metadata.code_alpha,".").concat(o.info.content.id).toLowerCase();n.value.vaccination.content.links.scheduling_phone.description&&(s=n.value.vaccination.content.links.scheduling_phone.description),c.strings.content[s]=Object(P.a)(Object(P.a)({},c.strings.content[s]),{},Object(M.a)({},i.currentLanguage,e.schedulingPhoneDesc)),o.vaccination.content.links.scheduling_phone.description=s}}else{var l=i.repoFileData[n.key];i.globalFileData.cdcStateNames.content["cdc/".concat(n.key,"/state_name")]=Object(P.a)(Object(P.a)({},i.globalFileData.cdcStateNames.content["cdc/".concat(n.key,"/state_name")]),{},Object(M.a)({},i.currentLanguage,e.details)),l.info.content.name=e.details;var u="c19.link/scheduling.phone.".concat(n.value.info.content.metadata.code_alpha).toLowerCase();if("noPhaseLabel"in l.vaccination.content?l.vaccination.content.noPhaseLabel=e.noPhaseLabel:l.vaccination.content=Object(P.a)(Object(P.a)({},l.vaccination.content),{},{noPhaseLabel:e.noPhaseLabel}),""!==(null===e||void 0===e?void 0:e.eligibility)?l.vaccination.content.links.eligibility?l.vaccination.content.links.eligibility.url.toLowerCase()!==e.eligibility.toLowerCase()&&(l.vaccination.content.links.eligibility={url:e.eligibility}):l.vaccination.content.links.eligibility={url:e.eligibility}:delete l.vaccination.content.links.eligibility,""!==(null===e||void 0===e?void 0:e.eligibilityPlan)?l.vaccination.content.links.eligibility_plan?l.vaccination.content.links.eligibility_plan.url.toLowerCase()!==e.eligibilityPlan.toLowerCase()&&(l.vaccination.content.links.eligibility_plan={url:e.eligibilityPlan}):l.vaccination.content.links.eligibility_plan={url:e.eligibilityPlan}:delete l.vaccination.content.links.eligibility_plan,""!==(null===e||void 0===e?void 0:e.info)?l.vaccination.content.links.info?l.vaccination.content.links.info.url.toLowerCase()!==e.info.toLowerCase()&&(l.vaccination.content.links.info={url:e.info,text:"cdc/".concat(n.key,"/state_link")}):l.vaccination.content.links.info={url:e.info,text:"cdc/".concat(n.key,"/state_link")}:delete l.vaccination.content.links.info,""!==(null===e||void 0===e?void 0:e.providers)?l.vaccination.content.links.providers?l.vaccination.content.links.providers.url.toLowerCase()!==e.providers.toLowerCase()&&(l.vaccination.content.links.providers={url:e.providers,text:"c19.links/vax_providers"}):l.vaccination.content.links.providers={url:e.providers,text:"c19.links/vax_providers"}:delete l.vaccination.content.links.providers,""!==(null===e||void 0===e?void 0:e.workflow)?l.vaccination.content.links.workflow?l.vaccination.content.links.workflow.url.toLowerCase()!==e.workflow.toLowerCase()&&(l.vaccination.content.links.workflow={url:e.workflow,text:"c19.links/vax_quiz"}):l.vaccination.content.links.workflow={url:e.workflow,text:"c19.links/vax_quiz"}:delete l.vaccination.content.links.workflow,""!==(null===e||void 0===e?void 0:e.scheduling)?l.vaccination.content.links.scheduling?l.vaccination.content.links.scheduling.url.toLowerCase()!==e.scheduling.toLowerCase()&&(l.vaccination.content.links.scheduling={url:e.scheduling,text:"c19.links/schedule_vax"}):l.vaccination.content.links.scheduling={url:e.scheduling,text:"c19.links/schedule_vax"}:delete l.vaccination.content.links.scheduling,""!==(null===e||void 0===e?void 0:e.schedulingPhone)&&(l.strings.content[u]=Object(P.a)(Object(P.a)({},l.strings.content[u]),{},Object(M.a)({},i.currentLanguage,e.schedulingPhone)),l.vaccination.content.links.scheduling_phone?l.vaccination.content.links.scheduling_phone.url.toLowerCase()!=="tel:".concat(e.schedulingPhone).toLowerCase()&&(l.vaccination.content.links.scheduling_phone={url:"tel:".concat(e.schedulingPhone),text:u}):l.vaccination.content.links.scheduling_phone={url:"tel:".concat(e.schedulingPhone),text:u}),l.vaccination.content.links.scheduling_phone&&""!==e.schedulingPhoneDesc){var d="c19.link/scheduling.phone.description.".concat(n.value.info.content.metadata.code_alpha).toLowerCase();n.value.vaccination.content.links.scheduling_phone.description&&(d=n.value.vaccination.content.links.scheduling_phone.description),l.strings.content[d]=Object(P.a)(Object(P.a)({},l.strings.content[d]),{},Object(M.a)({},i.currentLanguage,e.schedulingPhoneDesc)),l.vaccination.content.links.scheduling_phone.description=d}}i.repoFileData=Object(P.a)({},i.repoFileData)}})),me=Object(C.mutatorAction)("modifyStateStrings",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.item.moreInfoContent){var a={};a[t.currentLanguage]=e.item.moreInfoContent,n.strings.content[e.infoKey]=a}else delete n.strings.content[e.infoKey];if(e.regionInfo){var i,c=n.regions[e.regionInfo.key].vaccination;(null===(i=c.content)||void 0===i?void 0:i.phases)||ge(c,n.vaccination),c.content.phases.find((function(t){return t.id===e.item.groupId})).qualifications.find((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()})).moreInfoText=e.infoKey}else{var o=n.vaccination.content.phases.find((function(t){return t.id===e.item.groupId})),r=o.qualifications.find((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()}));r?e.item.moreInfoContent?r.moreInfoText=e.infoKey:delete r.moreInfoText:o.qualifications.push({question:e.item.qualifierId,moreInfoText:e.infoKey})}}}})),ge=function(e,t){e.content.phases=[],t.content.phases.forEach((function(t){var n={};n.id=t.id,n.qualifications=[],t.qualifications.forEach((function(e){var t;n.qualifications.push({question:e.question.toLowerCase(),moreInfoText:null===(t=e.moreInfoText)||void 0===t?void 0:t.replace(/[^a-z0-9._/\s]/gi,"").replace(/\s/g,"_").toLowerCase(),moreInfoUrl:e.moreInfoUrl})})),e.content.phases.push(n)}))},pe=Object(C.mutatorAction)("modifyMoreInfoLinks",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo){var a,i=n.regions[e.regionInfo.key].vaccination;(null===(a=i.content)||void 0===a?void 0:a.phases)||ge(i,n.vaccination);var c=i.content.phases.find((function(t){return t.id===e.item.groupId}));if(c){var o=c.qualifications.find((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()}));o&&(o.moreInfoUrl=e.item.moreInfoUrl)}}else{var r=n.vaccination.content.phases.find((function(t){return t.id===e.item.groupId})),s=r.qualifications.find((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()}));s?s.moreInfoUrl=e.item.moreInfoUrl:r.qualifications.push({question:e.item.qualifierId,moreInfoUrl:e.item.moreInfoUrl})}}}})),Oe=Object(C.mutatorAction)("updateQualifier",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo){var a,i=n.regions[e.regionInfo.key].vaccination;(null===(a=i.content)||void 0===a?void 0:a.phases)||ge(i,n.vaccination);var c=i.content.phases.find((function(t){return t.id===e.item.groupId})).qualifications.find((function(t){return t.question.toLowerCase()===e.oldId.toLowerCase()}));c&&(c.question=e.item.qualifierId.toLowerCase())}else{var o=n.vaccination.content.phases.find((function(t){return t.id===e.item.groupId})).qualifications.find((function(t){return t.question.toLowerCase()===e.oldId.toLowerCase()}));o&&(o.question=e.item.qualifierId.toLowerCase())}t.repoFileData=Object(P.a)({},t.repoFileData)}}})),ke=Object(C.mutatorAction)("addQualifier",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo){var a,i=n.regions[e.regionInfo.key].vaccination;(null===(a=i.content)||void 0===a?void 0:a.phases)||ge(i,n.vaccination),i.content.phases.find((function(t){return t.id===e.item.groupId})).qualifications.push({question:e.item.qualifierId})}else{n.vaccination.content.phases.find((function(t){return t.id===e.item.groupId})).qualifications.push({question:e.item.qualifierId})}t.repoFileData=Object(P.a)({},t.repoFileData)}}})),xe=Object(C.mutatorAction)("removeQualifier",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo){var a,i=n.regions[e.regionInfo.key].vaccination;(null===(a=i.content)||void 0===a?void 0:a.phases)||ge(i,n.vaccination);var c=i.content.phases.find((function(t){return t.id===e.item.groupId})),o=c.qualifications.findIndex((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()}));c.qualifications.splice(o,1),t.repoFileData=Object(P.a)({},t.repoFileData)}else{var r=n.vaccination.content.phases.find((function(t){return t.id===e.item.groupId})),s=r.qualifications.findIndex((function(t){return t.question.toLowerCase()===e.item.qualifierId.toLowerCase()}));r.qualifications.splice(s,1),t.repoFileData=Object(P.a)({},t.repoFileData)}}}})),ye=Object(C.mutatorAction)("removePhase",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo){var a,i=n.regions[e.regionInfo.key].vaccination;(null===(a=i.content)||void 0===a?void 0:a.phases)||ge(i,n.vaccination);var c=i.content.phases.findIndex((function(t){return t.id===e.phaseId}));i.content.phases.splice(c,1)}else{var o=n.vaccination.content.phases.findIndex((function(t){return t.id===e.phaseId}));n.vaccination.content.phases.splice(o,1)}t.repoFileData=Object(P.a)({},t.repoFileData)}}})),Ce=Object(C.mutatorAction)("addPhase",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey],a=V(e.item.name);n.vaccination.content.phases||(n.vaccination.content.phases=[]),n.vaccination.content.phases.push({id:a,label:e.item.name,qualifications:[]}),t.repoFileData=Object(P.a)({},t.repoFileData)}}})),Ne=Object(C.mutatorAction)("duplicatePhase",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){var n,a,i;t.pendingChanges=!0;var c=t.repoFileData[e.locationKey],o=e.isRegion&&(null===(n=e.regionInfo)||void 0===n?void 0:n.key)&&(null===(a=c.regions[e.regionInfo.key].vaccination)||void 0===a?void 0:a.content.phases)?c.regions[e.regionInfo.key].vaccination.content.phases.find((function(t){return t.id===e.phaseId})):c.vaccination.content.phases.find((function(t){return t.id===e.phaseId})),r=V(e.name),s={id:r,label:e.name,qualifications:null===(i=o.qualifications)||void 0===i?void 0:i.map((function(t){var n,a=null===(n=t.moreInfoText)||void 0===n?void 0:n.replace(new RegExp(e.phaseId+"$"),r);return a&&(c.strings.content[a]=c.strings.content[t.moreInfoText]),{question:t.question,moreInfoUrl:t.moreInfoUrl,moreInfoText:a}}))};if(e.isRegion&&e.regionInfo){var l,u=c.regions[e.regionInfo.key].vaccination;(null===(l=u.content)||void 0===l?void 0:l.phases)||ge(u,c.vaccination),u.content.phases.push(s)}else c.vaccination.content.phases.push(s);t.repoFileData=Object(P.a)({},t.repoFileData)}}})),we=Object(C.mutatorAction)("updatePhase",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey],a=e.item.phaseId.toLowerCase().replace(" (active)","").trim();n.vaccination.content.phases.find((function(e){return e.id===a})).label=e.item.name,t.repoFileData=Object(P.a)({},t.repoFileData)}}})),De=Object(C.mutatorAction)("setActivePhase",(function(e){if(e){var t=K();if(null===t||void 0===t?void 0:t.repoFileData){t.pendingChanges=!0;var n=t.repoFileData[e.locationKey];if(e.regionInfo)n.regions[e.regionInfo.key].vaccination.content.activePhase=e.phaseId,t.repoFileData=Object(P.a)({},t.repoFileData);else n.vaccination.content.activePhase=e.phaseId,t.repoFileData=Object(P.a)({},t.repoFileData)}}})),Se=Object(C.mutatorAction)("updateGlobalQualifiers",(function(e){if(e){var t=K(),n=t.globalFileData.customStrings;t.pendingChanges=!0;var a="";if(e.isNew){for(var i=e.qualifier.toLowerCase().replace(/[^A-Za-z0-9]/g,"_").split("_").filter((function(e){return e})),c=Object.keys(n.content),o="",r=0;r<i.length&&(o=0===r?i[0]:"".concat(o,"_").concat(i[r]),a="c19.eligibility.question/".concat(e.tagKey.toLowerCase(),".").concat(o),c.includes(a));r++);a=a.endsWith("_")?a.substr(0,a.length-1):a}else a=e.key;t.globalFileData.customStrings.content[a]=Object(P.a)(Object(P.a)({},t.globalFileData.customStrings.content[a]),{},Object(M.a)({},t.currentLanguage,e.qualifier)),t.globalFileData=Object(P.a)({},t.globalFileData)}})),Le=Object(C.mutatorAction)("translateLocationName",(function(e){if(e){var t=K();(null===t||void 0===t?void 0:t.globalFileData)&&(t.pendingChanges=!0,t.globalFileData.cdcStateNames.content[e.key]?t.globalFileData.cdcStateNames.content[e.key]=Object(P.a)(Object(P.a)({},t.globalFileData.cdcStateNames.content[e.key]),{},Object(M.a)({},e.toKey,e.to)):t.globalFileData.cdcStateNames.content=Object(P.a)(Object(P.a)({},t.globalFileData.cdcStateNames.content),Object(M.a)({},e.key,Object(M.a)({},e.toKey,e.to))),t.globalFileData=Object(P.a)({},t.globalFileData))}})),Fe=Object(C.mutatorAction)("translateQualifier",(function(e){if(e){var t=K();(null===t||void 0===t?void 0:t.globalFileData)&&(t.pendingChanges=!0,t.globalFileData.customStrings.content[e.key]?t.globalFileData.customStrings.content[e.key]=Object(P.a)(Object(P.a)({},t.globalFileData.customStrings.content[e.key]),{},Object(M.a)({},e.toKey,e.to)):t.globalFileData.customStrings.content=Object(P.a)(Object(P.a)({},t.globalFileData.customStrings.content),Object(M.a)({},e.key,Object(M.a)({},e.toKey,e.to))),t.globalFileData=Object(P.a)({},t.globalFileData))}})),Ie=Object(C.mutatorAction)("translateMisc",(function(e){if(e){var t=K();if("state"===e.category&&"global"!==e.parent)(null===t||void 0===t?void 0:t.repoFileData)&&(t.pendingChanges=!0,t.repoFileData[e.parent].strings.content[e.key][e.toKey]?t.repoFileData[e.parent].strings.content[e.key][e.toKey]=e.to:t.repoFileData[e.parent].strings.content[e.key]=Object(P.a)(Object(P.a)({},t.repoFileData[e.parent].strings.content[e.key]),Object(M.a)({},e.toKey,e.to)),t.repoFileData=Object(P.a)({},t.repoFileData));else if(null===t||void 0===t?void 0:t.globalFileData)t.pendingChanges=!0,Object.keys(t.globalFileData.customStrings.content).includes(e.key)?t.globalFileData.customStrings.content[e.key]?t.globalFileData.customStrings.content[e.key]=Object(P.a)(Object(P.a)({},t.globalFileData.customStrings.content[e.key]),{},Object(M.a)({},e.toKey,e.to)):t.globalFileData.customStrings.content=Object(P.a)(Object(P.a)({},t.globalFileData.customStrings.content),Object(M.a)({},e.key,Object(M.a)({},e.toKey,e.to))):t.globalFileData.cdcStateLinks.content[e.key]?t.globalFileData.cdcStateLinks.content[e.key]=Object(P.a)(Object(P.a)({},t.globalFileData.cdcStateLinks.content[e.key]),{},Object(M.a)({},e.toKey,e.to)):t.globalFileData.cdcStateLinks.content=Object(P.a)(Object(P.a)({},t.globalFileData.cdcStateLinks.content),Object(M.a)({},e.key,Object(M.a)({},e.toKey,e.to))),t.globalFileData=Object(P.a)({},t.globalFileData)}})),Re=function e(t,n,a){a.strings&&a.strings.content&&a.strings.content[t]?a.strings.content[t]=n:a.regions&&a.regions.length>0&&a.regions.forEach((function(a){e(t,n,a)}))},Pe=Object(C.mutatorAction)("udpateStrings",(function(e){if(e){var t=K();t.pendingChanges=!0,Object.keys(e).forEach((function(n){if(t.globalFileData.customStrings.content[n])t.globalFileData.customStrings.content[n]=e[n];else if(t.globalFileData.cdcStateLinks.content[n])t.globalFileData.cdcStateLinks.content[n]=e[n];else if(t.globalFileData.cdcStateNames.content[n])t.globalFileData.cdcStateNames.content[n]=e[n];else for(var a=0,i=Object.keys(t.repoFileData);a<i.length;a++){var c=i[a],o=t.repoFileData[c];if(JSON.stringify(o).includes(n)){Re(n,e[n],o);break}}})),t.globalFileData=Object(P.a)({},t.globalFileData)}})),Te=n(24),_e=n(131),Ae=n(281),qe=n(275),Ee=n(17),Ke=n(289),Be=n(283),We=n(49),ze=n(140),Ue=n(274),He=n(86),Ge=(n(168),n(2)),Me=Object(x.a)((function(){var e=K(),t=Object(i.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)([]),r=Object(l.a)(o,2),s=r[0],u=r[1],d=Object(k.a)(!0),b=Object(l.a)(d,2),j=b[0],f=b[1].toggle,h=Object(i.useState)([]),v=Object(l.a)(h,2),m=v[0],g=v[1];Object(i.useEffect)((function(){if(e.issues){var t=[],n=[];e.issues.forEach((function(e){var a=new Date(e.updated_at),i=e.labels.some((function(e){return"scrapped changes"===e.name.toLowerCase()}));e.pull_request?t.push({title:e.title,author:e.user.login,update:a.toLocaleString(),action:e}):i&&n.push({title:e.title,author:e.user.login,update:a.toLocaleString(),action:e})})),c(t),u(n)}}),[e.issues]);var p=Object(i.useCallback)((function(e){var t=Object(Te.a)(m),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),g(t)}),[m]),O=[{key:"titleCol",name:"Title",fieldName:"title",minWidth:200,isResizable:!0},{key:"notesCol",name:"Notes",fieldName:"notes",minWidth:100,isResizable:!0,onRender:function(e,t,n){return e.action.body?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsx)(_e.a,{className:"infoButton pr-".concat(e.action.number),iconName:"InfoSolid",onClick:function(){return p(e.action.number)}}),m.includes(e.action.number)&&Object(Ge.jsx)(Ae.a,{onDismiss:function(){return p(e.action.number)},target:".infoButton.pr-".concat(e.action.number),gapSpace:4,setInitialFocus:!0,role:"alertDialog",className:"infoCallout",directionalHint:5,children:Object(Ge.jsxs)("div",{className:"infoCalloutBody",children:[Object(Ge.jsx)("div",{className:"infoHeader",children:"Notes"}),Object(Ge.jsx)("div",{className:"infoBody",children:e.action.body})]})})]}):null}},{key:"authorCol",name:"Author",fieldName:"author",minWidth:200,isResizable:!0},{key:"updateCol",name:"Last Update",fieldName:"update",minWidth:200,isResizable:!0},{key:"actionCol",name:"",ariaLabel:"Actions Column",fieldName:"action",minWidth:200,isResizable:!0,onRender:function(t,n,a){var i,c,o=(null===(i=e.loadedPRData)||void 0===i?void 0:i.number)===(null===t||void 0===t?void 0:t.action.number);return Object(Ge.jsxs)("div",{className:"actionsColumn",children:[Object(Ge.jsxs)("a",{className:"tableActionLink",href:null===t||void 0===t||null===(c=t.action)||void 0===c?void 0:c.html_url,target:"_blank",rel:"noreferrer",children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid"}),"Approve"]}),Object(Ge.jsxs)("div",{className:"loadPRButton ".concat(o?"disabled":""),onClick:function(){return F(t.action.number)},children:[Object(Ge.jsx)(_e.a,{iconName:"DrillDownSolid"}),"Load PR"]})]})}}],x=[{key:"titleCol",name:"Title",fieldName:"title",minWidth:200,isResizable:!0},{key:"authorCol",name:"Author",fieldName:"author",minWidth:200,isResizable:!0},{key:"updateCol",name:"Last Update",fieldName:"update",minWidth:200,isResizable:!0},{key:"actionCol",name:"",ariaLabel:"Actions Column",fieldName:"action",minWidth:200,isResizable:!0,onRender:function(e,t,n){var a;return Object(Ge.jsxs)("a",{className:"tableActionLink",href:null===e||void 0===e||null===(a=e.action)||void 0===a?void 0:a.html_url,target:"_blank",rel:"noreferrer",children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid"}),"View"]})}}],y=[{key:"branchName",name:"Branch Name",fieldName:"name",minWidth:200,isResizable:!0},{key:"createdCol",name:"Created On",fieldName:"createdOn",minWidth:200,isResizable:!0,onRender:function(e){return Object(Ge.jsx)("div",{children:new Date(parseInt(e.name.split("-policy-")[1])).toLocaleString()})}},{key:"actionCol",name:"",ariaLabel:"Actions Column",fieldName:"action",minWidth:200,isResizable:!0,onRender:function(t,n,a){var i=e.userWorkingBranch===(null===t||void 0===t?void 0:t.name);return Object(Ge.jsx)("div",{className:"actionsColumn",children:Object(Ge.jsxs)("div",{className:"loadPRButton ".concat(i?"disabled":""),onClick:function(){return I(t)},children:[Object(Ge.jsx)(_e.a,{iconName:"DrillDownSolid"}),"Load Branch"]})})}}],C=Object(i.useCallback)((function(){L(),f()}),[f]),N=Object(i.useCallback)((function(){e.pendingChanges?f():L()}),[e.pendingChanges,f]);return Object(Ge.jsxs)("div",{className:"dashboardPageWrapper",children:[Object(Ge.jsxs)("div",{className:"bodyContainer",children:[Object(Ge.jsx)("div",{className:"bodyHeader",children:Object(Ge.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(Ge.jsx)("div",{className:"breadCrumbs",children:"/ Dashboard"}),Object(Ge.jsx)("div",{className:"mainTitle",children:"Dashboard"})]})}),Object(Ge.jsx)("div",{className:"bodyContent",children:e.isDataRefreshing?Object(Ge.jsx)("section",{children:Object(Ge.jsx)(Ke.a,{description:"Loading content..."})}):Object(Ge.jsxs)("section",{children:[Object(Ge.jsxs)("div",{className:"refreshRow",children:[Object(Ge.jsx)("div",{}),Object(Ge.jsxs)("div",{className:"refreshDataHeaderButton",onClick:N,children:[Object(Ge.jsx)(_e.a,{iconName:"Refresh",className:"refreshIcon"}),"Refresh Data"]})]}),Object(Ge.jsx)("div",{className:"sectionHeader",children:"Working Branches"}),Object(Ge.jsxs)("div",{className:"sectionContent",children:[Object(Ge.jsx)(qe.a,{items:e.userWorkingBranches,columns:y,setKey:"set",layoutMode:Ee.e.justified,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2}),!e.userWorkingBranches.length&&Object(Ge.jsx)("div",{style:{textAlign:"center"},children:"No working branches at this time."})]}),Object(Ge.jsx)("div",{className:"sectionHeader",children:"Pending PRs"}),Object(Ge.jsxs)("div",{className:"sectionContent",children:[Object(Ge.jsx)(qe.a,{items:a,columns:O,setKey:"set",layoutMode:Ee.e.justified,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2}),!a.length&&Object(Ge.jsx)("div",{style:{textAlign:"center"},children:"No pending PRs at this time."})]}),Object(Ge.jsx)("div",{className:"sectionHeader",children:"Location Updates"}),Object(Ge.jsxs)("div",{className:"sectionContent",children:[Object(Ge.jsx)(qe.a,{items:s,columns:x,setKey:"set",layoutMode:Ee.e.justified,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2}),!s.length&&Object(Ge.jsx)("div",{style:{textAlign:"center"},children:"No pending location updates at this time."})]})]})})]}),Object(Ge.jsxs)(Be.a,{hidden:j,onDismiss:f,dialogContentProps:{type:We.a.normal,closeButtonAriaLabel:"Close",title:"Refresh Data"},modalProps:{isBlocking:!1},children:[Object(Ge.jsxs)("div",{className:"dialogBodyText",children:["You have pending changes in the review tab to be submitted, refreshing the data will revert those changes.",Object(Ge.jsx)("br",{}),Object(Ge.jsx)("br",{}),"Do you want to proceed?"]}),Object(Ge.jsxs)(ze.a,{children:[Object(Ge.jsx)(Ue.a,{onClick:C,text:"Ok"}),Object(Ge.jsx)(He.a,{onClick:f,text:"Cancel"})]})]})]})})),Qe=Object(i.memo)((function(){return Object(Ge.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(Ge.jsxs)("div",{className:"appFooterRow",children:[Object(Ge.jsx)(Je,{href:"https://go.microsoft.com/fwlink/?LinkId=521839",children:"Privacy & Cookies"})," | ",Object(Ge.jsx)(Je,{href:"mailto:".concat("todo@todo.com"),children:"Contact Us"})," | ",Object(Ge.jsx)(Je,{href:"https://github.com/microsoft/covid-vaccine-bot/blob/main/CODE_OF_CONDUCT.md",children:"Code of Conduct"})]})})})),Je=Object(i.memo)((function(e){var t=e.children,n=e.href;return Object(Ge.jsx)("div",{className:"div",style:{cursor:"pointer",marginLeft:15,marginRight:15,display:"flex",alignContent:"center"},onClick:function(){return n&&window.open(n,"_blank")},children:t})})),Ve=n(294),Ye=(n(74),Object(x.a)((function(e){var t,n=e.onSubmit,a=e.onCancel,i=e.location;return Object(Ge.jsxs)("div",{className:"modalWrapper",children:[Object(Ge.jsx)("div",{className:"modalHeader",children:Object(Ge.jsx)("div",{className:"title",children:"Remove Location"})}),Object(Ge.jsx)("div",{className:"modalBody",children:Object(Ge.jsxs)("p",{children:["Are you sure you would like to remove ",Object(Ge.jsx)("strong",{children:null!==(t=i.text)&&void 0!==t?t:i.name}),"?"]})}),Object(Ge.jsxs)("div",{className:"modalFooter",children:[Object(Ge.jsx)(Ue.a,{text:"Remove Location",onClick:function(){return null===n||void 0===n?void 0:n(i)}}),Object(Ge.jsx)(He.a,{text:"Cancel",onClick:function(){return null===a||void 0===a?void 0:a()}})]})]})}))),Ze=n(284),$e=n(293),Xe=function(e,t){var n,a,i=K(),c=i.globalFileData,o=i.currentLanguage,r=e?[].concat(Object(Te.a)(Object.entries(null!==(n=null===e||void 0===e||null===(a=e.strings)||void 0===a?void 0:a.content)&&void 0!==n?n:{})),Object(Te.a)(Object.entries(c.customStrings.content))):Object(Te.a)(Object.entries(c.customStrings.content));return(t?r.filter((function(e){var n=Object(l.a)(e,2),a=n[0];n[1];return a.includes(t.toLowerCase())})):r).map((function(e){var t=Object(l.a)(e,2);return{key:t[0],text:t[1][o]}}))},et=function(e,t){var n=function(e,t,n){return n?function(e,t){var n=K().repoFileData,a=null===n||void 0===n?void 0:n[e.value.info.path.split("/")[0]],i=Xe(a,t);return i.length>0?i[0].text:""}(e,t):function(e,t){var n=Xe(e.value,t);return n.length>0?n[0].text:""}(e,t)};if(e){var a,i,c=(null===e||void 0===e?void 0:e.value)||{},o=c.info,r=c.vaccination,s=(null===r||void 0===r||null===(a=r.content)||void 0===a?void 0:a.links)||{},l=s.info,u=s.scheduling_phone,d=s.eligibility_plan,b=s.workflow,j=s.scheduling,f=s.providers,h=s.eligibility;return{details:o.content.name,regionType:o.content.type,info:(null===l||void 0===l?void 0:l.url)||"",workflow:(null===b||void 0===b?void 0:b.url)||"",scheduling:(null===j||void 0===j?void 0:j.url)||"",providers:(null===f||void 0===f?void 0:f.url)||"",eligibility:(null===h||void 0===h?void 0:h.url)||"",eligibilityPlan:(null===d||void 0===d?void 0:d.url)||"",schedulingPhone:(null===u||void 0===u?void 0:u.text)?n(e,u.text,t):"",schedulingPhoneDesc:(null===u||void 0===u?void 0:u.description)?n(e,u.description,t):"",noPhaseLabel:(null===(i=r.content)||void 0===i?void 0:i.noPhaseLabel)||!1}}return{details:"",regionType:"",info:"",workflow:"",scheduling:"",providers:"",eligibility:"",eligibilityPlan:"",schedulingPhone:"",schedulingPhoneDesc:"",noPhaseLabel:!1}},tt=Object(x.a)((function(e){var t=e.onSubmit,n=e.onCancel,a=e.item,c=e.isRegion,o=Object(i.useState)(et(a,c)),r=Object(l.a)(o,2),s=r[0],u=r[1],d=Object(i.useRef)(s),b=[{key:"state",text:"State"},{key:"territory",text:"Territory"},{key:"tribal_land",text:"Tribal land"},{key:"county",text:"County"},{key:"city",text:"City"}].filter((function(e){return!c||"state"!==e.key})),j=c?"sublocation":"location",h=a?"Edit ".concat(j):"Add new ".concat(j),v=Object(i.useCallback)((function(e,t){d.current=Object(P.a)(Object(P.a)({},d.current),{regionType:null===t||void 0===t?void 0:t.key}),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,d]),m=Object(i.useCallback)((function(e){var t=e.target.value;d.current=Object(P.a)(Object(P.a)({},d.current),Object(M.a)({},e.target.name,t)),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,d]),g=Object(i.useCallback)((function(e,t){d.current=Object(P.a)(Object(P.a)({},d.current),{noPhaseLabel:t}),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,d]),p=Object(i.useCallback)((function(){return""!==s.details&&""!==s.regionType}),[s]);return Object(Ge.jsxs)("div",{className:"modalWrapper",children:[Object(Ge.jsx)("div",{className:"modalHeader",children:Object(Ge.jsx)("div",{className:"title",children:h})}),Object(Ge.jsxs)("div",{className:"modalBody",children:[Object(Ge.jsxs)("div",{className:"detailsGroup",children:[Object(Ge.jsx)(Ze.a,{label:"Details",name:"details",value:s.details,onChange:m}),Object(Ge.jsx)(f.a,{selectedKey:s.regionType,placeholder:"Region type",options:b,onChange:v})]}),Object(Ge.jsx)(Ze.a,{label:"General information link for the region:",name:"info",value:s.info,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"Link to an existing eligibility workflow tool:",name:"workflow",value:s.workflow,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"Appointment registration scheduler:",name:"scheduling",value:s.scheduling,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"List of scheduling providers and locations:",name:"providers",value:s.providers,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"Eligibility criteria about the current phase:",name:"eligibility",value:s.eligibility,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"Documentation describing the rollout phases in detail:",name:"eligibilityPlan",value:s.eligibilityPlan,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"A scheduling hotline:",name:"schedulingPhone",value:s.schedulingPhone,onChange:m}),Object(Ge.jsx)(Ze.a,{label:"Description of scheduling hotline:",name:"schedulingPhoneDesc",value:s.schedulingPhoneDesc,onChange:m}),Object(Ge.jsx)($e.a,{label:"No phase label",checked:s.noPhaseLabel,onChange:g})]}),Object(Ge.jsxs)("div",{className:"modalFooter",children:[Object(Ge.jsx)(Ue.a,{text:"Submit",disabled:!p(),onClick:function(){return null===t||void 0===t?void 0:t(s,a)}}),Object(Ge.jsx)(He.a,{text:"Cancel",onClick:function(){return null===n||void 0===n?void 0:n()}})]})]})})),nt=Object(x.a)((function(e){var t=e.onSubmit,n=e.onCancel,a=e.item,c=e.duplicate,o=void 0!==c&&c,r=e.selectedState,s=e.isRegion,u=e.regionInfo,d=Object(i.useState)(function(e){return e?{phaseId:e.keyId,name:e.name.includes(" (active)")?e.name.replace(" (active)",""):e.name,isActive:e.keyId.includes(" (active)")}:{phaseId:null,name:"",isActive:!1}}(a)),b=Object(l.a)(d,2),j=b[0],f=b[1],h=Object(i.useState)(!1),v=Object(l.a)(h,2),m=v[0],g=v[1],p=K().repoFileData,O=Object(i.useRef)(j),k=Object(i.useCallback)((function(e){var t=e.target.value;O.current=Object(P.a)(Object(P.a)({},O.current),Object(M.a)({},e.target.name,t)),f(Object(P.a)(Object(P.a)({},j),O.current))}),[j,O]),x=Object(i.useCallback)((function(){var e;if(!o)return"";var t=p[r.key],n=V(j.name);return s&&(null===u||void 0===u?void 0:u.key)&&(null===(e=t.regions[u.key].vaccination)||void 0===e?void 0:e.content.phases)&&!!t.regions[u.key].vaccination.content.phases.find((function(e){return e.id===n}))||!!t.vaccination.content.phases.find((function(e){return e.id===n}))?(g(!0),"Phase is too similar to one already in use, please revise."):(g(!1),"")}),[p,g,o,null===j||void 0===j?void 0:j.name,null===r||void 0===r?void 0:r.key,s,null===u||void 0===u?void 0:u.key]),y=Object(i.useCallback)((function(){return m||""===j.name}),[j,m]),C=o?"Duplicate Phase":a?"Edit Phase":"New Phase";return Object(Ge.jsxs)("div",{className:"modalWrapper",children:[Object(Ge.jsx)("div",{className:"modalHeader",children:Object(Ge.jsx)("div",{className:"title",children:C})}),Object(Ge.jsx)("div",{className:"modalBody",children:Object(Ge.jsx)(Ze.a,{label:"Phase Name:",name:"name",value:j.name,onChange:k,onGetErrorMessage:x})}),Object(Ge.jsxs)("div",{className:"modalFooter",children:[Object(Ge.jsx)(Ue.a,{text:"Submit",disabled:y(),onClick:function(){return null===t||void 0===t?void 0:t(j)}}),Object(Ge.jsx)(He.a,{text:"Cancel",onClick:function(){return null===n||void 0===n?void 0:n()}})]})]})})),at=n(16),it=function(e){return ot(e,"eligibility.question")},ct=function(e,t){return it(e).filter((function(e){return e.key.startsWith("c19.eligibility.question/".concat(t,"."))||e.key.endsWith("c19.eligibility.question/".concat(t))}))},ot=function(e,t){var n,a,i,c=K(),o=c.globalFileData,r=c.currentLanguage,s=e?[].concat(Object(Te.a)(Object.entries(null!==(n=null===(a=e.value)||void 0===a||null===(i=a.strings)||void 0===i?void 0:i.content)&&void 0!==n?n:{})),Object(Te.a)(Object.entries(o.customStrings.content))):Object(Te.a)(Object.entries(o.customStrings.content));return(t?s.filter((function(e){var n=Object(l.a)(e,2),a=n[0];n[1];return a.includes(t)})):s).map((function(e){var t=Object(l.a)(e,2);return{key:t[0],text:t[1][r]}})).sort((function(e,t){return e.text>t.text?1:-1}))},rt=function(e,t){var n,a,i,c=K(),o=c.globalFileData,r=c.currentLanguage,s=e?[].concat(Object(Te.a)(Object.entries(null!==(n=null===(a=e.value)||void 0===a||null===(i=a.strings)||void 0===i?void 0:i.content)&&void 0!==n?n:{})),Object(Te.a)(Object.entries(o.customStrings.content))):Object(Te.a)(Object.entries(o.customStrings.content));return(t?s.filter((function(e){var n=Object(l.a)(e,2),a=n[0];n[1];return a.toLowerCase()===t})):s).map((function(e){var t=Object(l.a)(e,2);return{key:t[0],text:t[1][r]}})).sort((function(e,t){return e.text>t.text?1:-1}))},st=(n(170),Object(x.a)((function(e){var t=e.selectedState,n=e.rowItems,a=e.isEditable,c=e.isRegion,o=e.onRowItemRemove,r=e.onRowItemTextChange,s=e.onRowItemQualifierChange,u=e.groupKey,d=Object(i.useRef)(function(e){var t=it(e),n=[],a=[];return t.forEach((function(e){var t=e.key.split("/")[1].split(".")[0];n.includes(t)||(n.push(t),a.push({key:t,text:J(t)}))})),a.sort((function(e,t){return e.text>t.text?1:-1}))}(t)),b=Object(i.useRef)(it(t)),h=Object(i.useState)(ct(t,n.item.tagKey)),v=Object(l.a)(h,2),m=v[0],g=v[1],p=K(),O=p.globalFileData,k=p.repoFileData,x=!1,y=n.item.moreInfoKey;if(c){var C=n.item.location.value.vaccination.content.phases,N=null===C||void 0===C?void 0:C.find((function(e){return e.id===n.item.groupId}));if(N){var w=null===N||void 0===N?void 0:N.qualifications.find((function(e){return e.question===n.item.qualifierId}));w&&(x=!0,y=w.moreInfoText)}}var D=Object(i.useState)(function(e,t){if(t){var n=rt(e,t);if(n.length>0)return n[0].text}return""}(t,y)),S=Object(l.a)(D,2),L=S[0],F=S[1],I=Object(i.useState)(function(e,t){if(e){var n=t.item.location.value.vaccination.content.phases,a=null===n||void 0===n?void 0:n.find((function(e){return e.id===t.item.groupId}));if(a){var i=null===a||void 0===a?void 0:a.qualifications.find((function(e){return e.question===t.item.qualifierId}));if(i)return i.moreInfoUrl}}return t.item.moreInfoUrl}(c,n)),R=Object(l.a)(I,2),T=R[0],_=R[1],A=Object(i.useRef)(n.item);A.current.moreInfoContent=L,Object(i.useEffect)((function(){O&&(b.current=it(t),g(ct(t,n.item.tagKey)))}),[O,k,b,t,n]);var q=Object(i.useCallback)((function(e,t){g(b.current.filter((function(e){return e.key.split("/")[1].split(".")[0]===t.key}))),F(""),_(""),A.current=Object(P.a)(Object(P.a)({},A.current),{key:"".concat(n.item.groupId,"-c19.eligibility.question/").concat(t.key),tagKey:t.key,qualifierId:void 0,text:"",moreInfoKey:"",moreInfoContent:""})}),[b,n]),E=Object(i.useCallback)((function(e,t){F(""),_(""),A.current=Object(P.a)(Object(P.a)({},A.current),{qualifierId:t.key,text:t.text,moreInfoKey:"",moreInfoContent:""}),s(A.current,n.item)}),[s,n]),B=Object(i.useCallback)((function(e,t){A.current=Object(P.a)(Object(P.a)({},A.current),{moreInfoContent:t}),F(t)}),[F]),W=Object(i.useCallback)((function(e,t){A.current=Object(P.a)(Object(P.a)({},A.current),{moreInfoUrl:t}),_(t)}),[_]);return Object(Ge.jsxs)("div",{className:"phaseDetailRow",style:{pointerEvents:a?"unset":"none"},children:[Object(Ge.jsxs)("div",{className:"mainRow",children:[Object(Ge.jsx)(_e.a,{iconName:"InfoSolid",className:"infoIcon",style:{visibility:x?"visible":"hidden"}}),Object(Ge.jsx)(f.a,{options:d.current,defaultSelectedKey:n.item.tagKey,placeholder:"Tag",className:"tagDropdown",styles:{root:{minWidth:250}},onChange:q}),Object(Ge.jsx)(f.a,{title:n.item.text,options:m,defaultSelectedKey:n.item.qualifierId,placeholder:"Qualifier",styles:{root:{width:"100%",minWidth:0}},onChange:E}),Object(Ge.jsx)(j.a,{iconProps:{iconName:"MoreVertical"},styles:{menuIcon:{visibility:"hidden",width:0,margin:0}},menuProps:{isBeakVisible:!1,directionalHint:at.a.rightTopEdge,items:[{key:"removeRow",text:"Remove",onClick:function(){return null===o||void 0===o?void 0:o(n.item,u)}},{key:"details",text:"Details"}]},title:"More","aria-label":"More"})]}),Object(Ge.jsxs)("div",{className:"detailsRow",children:[Object(Ge.jsx)(Ze.a,{placeholder:"More info text",multiline:!0,autoAdjustHeight:!0,resizable:!1,styles:{root:{width:"calc(100% - 32px)",padding:"5px 0"}},value:L,onChange:B,onBlur:function(){return r(A.current,n.item)}}),Object(Ge.jsx)(Ze.a,{placeholder:"More info url",styles:{root:{width:"calc(100% - 32px)",padding:"5px 0"}},value:T,onChange:W,onBlur:function(){return r(A.current,n.item)}})]})]})}))),lt=(n(75),Object(x.a)((function(e){var t=K(),n=t.globalFileData,a=t.currentLanguage,c=t.repoFileData,o=t.isEditable,r=e.isRegion,s=e.value,u=e.selectedState,d=Object(i.useState)([]),b=Object(l.a)(d,2),j=b[0],f=b[1],h=Object(i.useRef)([]),v=Object(i.useRef)(null),m=Object(k.a)(!1),g=Object(l.a)(m,2),p=g[0],x=g[1],y=x.setTrue,C=x.setFalse,N=function(e){var t=e.name,n=V(t);!!c[u.key].vaccination.content.phases.find((function(e){return e.id===n}))||Ne({locationKey:u.key,phaseId:v.current.key,name:t,isRegion:r,regionInfo:s})},w=Object(i.useCallback)((function(e){v.current=null!==e&&void 0!==e?e:null,y()}),[y]);Object(i.useEffect)((function(){if(c){C();var e=[],t=c[u.key],i=t.vaccination.content.phases,o=r?c[u.key].regions[s.key]:null;r&&o.vaccination.content.phases&&(i=o.vaccination.content.phases),i.forEach((function(i){var c=!0;c=r?!(h.current.length>0)||!h.current.includes(i.id):h.current.length>0?!h.current.includes(i.id):s.value.id!==i.id;var l=!1;l=r&&o.vaccination.content.activePhase?i.id===o.vaccination.content.activePhase:i.id===t.vaccination.content.activePhase;var u={key:i.id,name:i.label||i.id,count:i.qualifications.length,isCollapsed:c,data:{name:i.label||i.id,keyId:i.id,isActive:l}},d=[];i.qualifications.forEach((function(e){var c=String(e.question).toLowerCase(),o="*Translation not found* (".concat(c,")");t.strings&&t.strings.content[c]?o=t.strings.content[c][a]||o:n.customStrings.content[c]&&(o=n.customStrings.content[c][a]||o),d.push({key:i.id+"-"+c,text:o,moreInfoKey:(null===e||void 0===e?void 0:e.moreInfoText)?e.moreInfoText.toLowerCase():"",moreInfoContent:"",moreInfoUrl:e.moreInfoUrl,qualifierId:c,tagKey:c.split("/")[1].split(".")[0],groupId:i.id,location:s})})),u.items=d,e.push(u)})),f(e)}}),[c,n,u,a,r,s,C]);var D=function(e,t){if("c19.eligibility.question/new_qualifier"!==e.qualifierId)xe({locationKey:u.key,item:e,regionInfo:r?s:null});else{var n=j.map((function(e){if(e.key===t){var n=e.items.findIndex((function(e){return"c19.eligibility.question/new_qualifier"===e.qualifierId}));-1!==n&&e.items.splice(n,1)}return e}));f(n)}},S=function(e,t){var n,a;if((null===(n=t.moreInfoUrl)||void 0===n?void 0:n.toLowerCase())!==(null===(a=e.moreInfoUrl)||void 0===a?void 0:a.toLowerCase()))pe({locationKey:u.key,item:e,regionInfo:r?s:null});else if(t.moreInfoContent!==e.moreInfoContent){var i=e.qualifierId.replace("question","moreinfo");i+=".".concat(u.value.info.content.metadata.code_alpha.toLowerCase()),r&&(i+=".".concat(s.name.toLowerCase())),i+=".".concat(e.groupId),me({infoKey:i,locationKey:u.key,item:e,regionInfo:r?s:null})}},L=function(e,t){"c19.eligibility.question/new_qualifier"!==t.qualifierId?Oe({oldId:t.qualifierId,locationKey:u.key,item:e,regionInfo:r?s:null}):ke({locationKey:u.key,item:e,regionInfo:r?s:null})};return Object(Ge.jsx)("div",{className:"phaseGridContainer",children:j.length>0?j.map((function(e,t){return Object(Ge.jsxs)("div",{children:[Object(Ge.jsxs)("div",{className:"phaseGroupHeader",children:[Object(Ge.jsxs)("div",{className:"groupHeaderLabel",onClick:function(){!function(e){var t=j.map((function(t){return t.key===e.key&&(t.isCollapsed=!t.isCollapsed),t}));h.current=t.filter((function(e){return!e.isCollapsed})).map((function(e){return e.key})),f(t)}(e)},children:[Object(Ge.jsx)(_e.a,{iconName:e.isCollapsed?"ChevronRight":"ChevronDown",className:"groupToggleIcon"}),e.name?Object(Ge.jsxs)("span",{children:[e.name," ",Object(Ge.jsxs)("small",{children:["(",e.data.keyId,")"]})]}):"Phase ".concat(e.data.keyId)]}),Object(Ge.jsx)("div",{className:"groupHeaderButtons",children:o?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsxs)("div",{className:"addQualifierGroup",onClick:function(){return w(e)},children:[Object(Ge.jsx)(_e.a,{iconName:"DuplicateRow",style:{color:"#0078d4"}}),"Duplicate"]}),Object(Ge.jsxs)("div",{className:"removePhaseGroup",onClick:function(){return t=e.data.keyId,void ye({locationKey:u.key,phaseId:t,regionInfo:r?s:null});var t},children:[Object(Ge.jsx)(_e.a,{iconName:"Blocked2Solid",style:{color:"#d13438"}}),"Remove"]}),e.data.isActive?Object(Ge.jsxs)("div",{className:"activeGroup",children:[Object(Ge.jsx)(_e.a,{iconName:"CircleFill",style:{color:"#00b7c3"}}),"Active Phase"]}):Object(Ge.jsxs)("div",{className:"activeGroup",onClick:function(){return t=e.data.keyId,void De({locationKey:u.key,phaseId:t,regionInfo:r?s:null});var t},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleRing",style:{color:"#00b7c3"}}),"Set as Active"]})]}):Object(Ge.jsx)(Ge.Fragment,{children:e.data.isActive&&Object(Ge.jsxs)("div",{className:"activeGroup",children:[Object(Ge.jsx)(_e.a,{iconName:"CircleFill",style:{color:"#00b7c3"}}),"Active Phase"]})})})]}),Object(Ge.jsxs)("div",{style:{display:e.isCollapsed?"none":"block"},children:[e.items.length>0&&e.items.map((function(t,n){return Object(Ge.jsx)(st,{groupKey:e.key,rowItems:{item:t},selectedState:u,isEditable:o,isRegion:r,onRowItemRemove:D,onRowItemTextChange:S,onRowItemQualifierChange:L},t.key+"_"+n)})),Object(Ge.jsx)("div",{className:"phaseBottomGroup",style:{marginTop:e.items.length>0?0:"20px"},children:Object(Ge.jsxs)("div",{className:"addQualifierGroup",onClick:function(){return function(e){var t={key:"".concat(e,"-c19.eligibility.question/new_qualifier"),text:"",moreInfoKey:"",moreInfoUrl:"",qualifierId:"c19.eligibility.question/new_qualifier",tagKey:"new_tagKey",groupId:e,location:s},n=j.map((function(n){return n.key===e&&n.items.push(t),n}));f(n)}(e.data.keyId)},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Qualifier"]})})]}),Object(Ge.jsx)(O.a,{isOpen:p,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(nt,{selectedState:u,duplicate:!0,isRegion:r,regionInfo:s,onCancel:C,onSubmit:N})})]},"phasegroup-".concat(t))})):null})}))),ut=Object(x.a)((function(e){var t=Object(i.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],o=Object(i.useRef)([]),r=Object(i.useState)({isRegion:!1,value:null,selectedState:null}),s=Object(l.a)(r,2),u=s[0],d=s[1],b=Object(k.a)(!1),j=Object(l.a)(b,2),f=j[0],h=j[1],v=h.setTrue,m=h.setFalse,g=Object(k.a)(!1),p=Object(l.a)(g,2),x=p[0],y=p[1],C=y.setTrue,N=y.setFalse,w=Object(k.a)(!1),D=Object(l.a)(w,2),S=D[0],L=D[1],F=L.setTrue,I=L.setFalse,R=Object(i.useRef)(null),P=K(),T=e.selectedState,_=e.onNavigateBack,A=[{key:"regionCol",name:"Region",fieldName:"name",minWidth:200,isResizable:!0},{key:"activePhaseCol",name:"Active Phase ID",fieldName:"phase",minWidth:200,isResizable:!0},{key:"editCol",name:"",fieldName:"editLocation",minWidth:50,isResizable:!1}].filter((function(e){return!!P.isEditable||"editCol"!==e.key})),q=[{key:"idCol",name:"Phase ID",fieldName:"keyId",minWidth:50,maxWidth:200,isResizable:!1},{key:"nameCol",name:"Name",fieldName:"name",minWidth:200,isResizable:!1},{key:"qualCol",name:"# of qualifications",fieldName:"qualifications",minWidth:200,isResizable:!1},{key:"editCol",name:"",fieldName:"editPhase",minWidth:50,isResizable:!1}].filter((function(e){return!!P.isEditable||"editCol"!==e.key})),E=Object(i.useState)([]),B=Object(l.a)(E,2),W=B[0],z=B[1];Object(i.useEffect)((function(){var e,t=P.repoFileData[T.key],n=null!==(e=null===t||void 0===t?void 0:t.regions)&&void 0!==e?e:{};if(Object.keys(n).length>0){var a=[];Object.entries(n).forEach((function(e){var n=Object(l.a)(e,2),i=n[0],c=n[1],o=c;a.push({key:i,name:J(o.info.content.name),value:c,phase:o.vaccination.content.activePhase?o.vaccination.content.activePhase:t.vaccination.content.activePhase})})),c(a),o.current=a}else o.current=[];if(t){var i=dt({key:t.info.content.id,value:t});z(i)}}),[P.repoFileData,T,o,z]);var U=Object(i.useCallback)((function(e,t){d({isRegion:e,value:t,selectedState:T})}),[T]),H=Object(i.useCallback)((function(e,t){m(),t?ve(e,!0,t,T):fe(e,!0,T)}),[m,T]),G=Object(i.useCallback)((function(e){N(),he(e,!0,T)}),[N,T]),M=Object(i.useCallback)((function(e){R.current=null!==e&&void 0!==e?e:null,v()}),[v]),Q=Object(i.useCallback)((function(e){R.current=null!==e&&void 0!==e?e:null,F()}),[F]),V=Object(i.useCallback)((function(e){R.current=null!==e&&void 0!==e?e:null,C()}),[C]),Y=Object(i.useCallback)((function(e,t,n){if(!n)return null;var a=e[n.fieldName];return"editCol"===n.key?P.isEditable?Object(Ge.jsxs)("span",{children:["editLocation"===(null===n||void 0===n?void 0:n.fieldName)&&Object(Ge.jsx)(_e.a,{iconName:"Cancel",className:"deleteIcon",onClick:function(){return V(e)}}),Object(Ge.jsx)(_e.a,{iconName:"Edit",className:"editIcon",onClick:function(){return"editLocation"===(null===n||void 0===n?void 0:n.fieldName)?M(e):Q(e)}})]}):null:Object(Ge.jsx)("span",{children:a})}),[M,V,Q,P.isEditable]),Z=Object(i.useCallback)((function(e,t){c(t?o.current.filter((function(e){return e.name.toLowerCase().indexOf(t)>-1})):o.current)}),[o]);return Object(Ge.jsxs)("div",{className:"bodyContainer",children:[Object(Ge.jsx)("div",{className:"bodyHeader subContent",children:Object(Ge.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(Ge.jsxs)("div",{className:"breadCrumbs",children:[Object(Ge.jsxs)("span",{className:"crumbLink",onClick:_,children:["/ Locations"," "]}),u.value?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsxs)("span",{className:"crumbLink",onClick:function(){return d({isRegion:!1,value:null,selectedState:null})},children:["/ ",T.text+" "]}),u.isRegion?Object(Ge.jsxs)(Ge.Fragment,{children:["/ ",u.value.name]}):Object(Ge.jsx)(Ge.Fragment,{children:"/ Phase Overview"})]}):Object(Ge.jsxs)(Ge.Fragment,{children:["/ ",T.text]})]}),Object(Ge.jsx)("div",{className:"mainTitle",children:u.value?Object(Ge.jsx)(Ge.Fragment,{children:u.isRegion?Object(Ge.jsxs)(Ge.Fragment,{children:[u.value.name," Region Phase Overview"]}):Object(Ge.jsxs)(Ge.Fragment,{children:[T.text," Phase Overview"]})}):Object(Ge.jsx)(Ge.Fragment,{children:T.text})})]})}),u.value?Object(Ge.jsx)("div",{className:"bodyContent",children:Object(Ge.jsx)("section",{children:Object(Ge.jsx)(lt,{isRegion:u.isRegion,value:u.value,selectedState:T})})}):Object(Ge.jsxs)("div",{className:"bodyContent",children:[Object(Ge.jsxs)("section",{children:[Object(Ge.jsx)("div",{className:"listTitle",children:"Phases"}),Object(Ge.jsxs)("div",{className:"searchRow",children:[Object(Ge.jsx)("div",{}),P.isEditable&&Object(Ge.jsxs)("div",{className:"addLocationHeaderButton",onClick:function(){return Q(null)},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Phase"]})]}),T.value.vaccination.content.phases&&T.value.vaccination.content.phases.length>0?Object(Ge.jsx)(qe.a,{items:W,columns:q,setKey:"set",layoutMode:Ee.e.justified,checkboxVisibility:2,onItemInvoked:function(e){return U(!1,e)},onRenderItemColumn:Y,className:"locationDetailsList"}):Object(Ge.jsx)("div",{children:"No phases available at this time."})]}),Object(Ge.jsxs)("section",{children:[Object(Ge.jsx)("div",{className:"listTitle",children:"Sublocation"}),Object(Ge.jsxs)("div",{className:"searchRow",children:[o.current.length>0?Object(Ge.jsx)(Ve.a,{styles:{root:{width:400}},placeholder:"Search",onChange:function(e,t){return Z(e,t)}}):Object(Ge.jsx)("div",{}),P.isEditable&&Object(Ge.jsxs)("div",{className:"addLocationHeaderButton",onClick:function(){return M(null)},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Sublocation"]})]}),a&&a.length>0&&o.current.length>0?Object(Ge.jsx)(qe.a,{items:a,columns:A,setKey:"set",layoutMode:Ee.e.justified,selectionPreservedOnEmptyClick:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2,onItemInvoked:function(e){return U(!0,e)},onRenderItemColumn:Y,className:"locationDetailsList"}):Object(Ge.jsx)("div",{children:"No regions available at this time."})]})]}),Object(Ge.jsx)(O.a,{isOpen:f,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(tt,{item:R.current,onCancel:m,onSubmit:H,isRegion:!0})}),Object(Ge.jsx)(O.a,{isOpen:S,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(nt,{item:R.current,onCancel:I,onSubmit:function(e){I(),e.phaseId?we({locationKey:T.key,item:e}):Ce({locationKey:T.key,item:e})}})}),Object(Ge.jsx)(O.a,{isOpen:x,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(Ye,{location:R.current,onCancel:N,onSubmit:G})})]})})),dt=function(e){return e.value.vaccination.content.phases?e.value.vaccination.content.phases.map((function(t,n){var a,i=e.value.vaccination.content.activePhase;return{key:String(t.id)+n,keyId:String(t.id)+(t.id===i?" (active)":""),name:J(null!==(a=t.label)&&void 0!==a?a:t.id)+(t.id===i?" (active)":""),qualifications:t.qualifications.length,value:t,isNew:!1}})):[]},bt=Object(x.a)((function(e){var t=e.onSelectedItem,n=Object(k.a)(!1),a=Object(l.a)(n,2),c=a[0],o=a[1],r=o.setTrue,s=o.setFalse,u=Object(k.a)(!1),d=Object(l.a)(u,2),b=d[0],j=d[1],f=j.setTrue,h=j.setFalse,v=Object(i.useState)([]),m=Object(l.a)(v,2),g=m[0],p=m[1],x=Object(i.useRef)([]),y=Object(i.useRef)(null),C=K(),N=[{key:"stateCol",name:"State",fieldName:"text",minWidth:200,isResizable:!0},{key:"regionCol",name:"Sublocations",fieldName:"regions",minWidth:200,isResizable:!0},{key:"editCol",name:"",fieldName:"editLocation",minWidth:50,isResizable:!1}].filter((function(e){return!!C.isEditable||"editCol"!==e.key&&"delete"!==e.key}));Object(i.useEffect)((function(){if(C.repoFileData){var e=[];Object.entries(C.repoFileData).forEach((function(t){var n,a,i=Object(l.a)(t,2),c=i[0],o=i[1],r=null===o||void 0===o||null===(n=o.info)||void 0===n?void 0:n.content.id,s=null===C||void 0===C||null===(a=C.globalFileData)||void 0===a?void 0:a.cdcStateNames.content,u=s["cdc/".concat(r,"/state_name")]&&s["cdc/".concat(r,"/state_name")][C.currentLanguage]&&""!==s["cdc/".concat(r,"/state_name")][C.currentLanguage].trim()?s["cdc/".concat(r,"/state_name")][C.currentLanguage]:"*Translation Not Found* (".concat(r,")");e.push({key:c,text:u,regions:(null===o||void 0===o?void 0:o.regions)?Object.keys(o.regions).length:0,value:o})})),p(e),x.current=e}}),[C.repoFileData,C.globalFileData,C.currentLanguage,x]);var w=Object(i.useCallback)((function(e,t){p(t?x.current.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1})):x.current)}),[x]),D=Object(i.useCallback)((function(e){t(e)}),[t]),S=Object(i.useCallback)((function(e,t){s(),t?ve(e,!1,t):fe(e,!1)}),[s]),L=Object(i.useCallback)((function(e){h(),he(e)}),[h]),F=Object(i.useCallback)((function(e){y.current=null!==e&&void 0!==e?e:null,r()}),[r]),I=Object(i.useCallback)((function(e){y.current=null!==e&&void 0!==e?e:null,f()}),[f]),R=Object(i.useCallback)((function(e,t,n){if(!n)return null;var a=e[n.fieldName];return"editCol"===n.key?C.isEditable?Object(Ge.jsxs)("span",{children:[Object(Ge.jsx)(_e.a,{iconName:"Cancel",className:"deleteIcon",onClick:function(){return I(e)}}),Object(Ge.jsx)(_e.a,{iconName:"Edit",className:"editIcon",onClick:function(){return F(e)}})]}):null:Object(Ge.jsx)("span",{children:a})}),[F,I,C.isEditable]);return Object(Ge.jsxs)("div",{className:"bodyContainer",children:[Object(Ge.jsx)("div",{className:"bodyHeader",children:Object(Ge.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(Ge.jsx)("div",{className:"breadCrumbs",children:"/ Locations"}),Object(Ge.jsx)("div",{className:"mainTitle",children:"Locations"})]})}),Object(Ge.jsx)("div",{className:"bodyContent",children:C.isDataRefreshing?Object(Ge.jsx)("section",{children:Object(Ge.jsx)(Ke.a,{description:"Loading content..."})}):Object(Ge.jsxs)("section",{children:[Object(Ge.jsxs)("div",{className:"searchRow",children:[Object(Ge.jsx)(Ve.a,{styles:{root:{width:400}},placeholder:"Search",onChange:function(e,t){return w(e,t)}}),C.isEditable&&Object(Ge.jsxs)("div",{className:"addLocationHeaderButton",onClick:function(){return F(null)},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",style:{color:"#0078d4"}}),"Add Location"]})]}),Object(Ge.jsx)(qe.a,{items:g,columns:N,setKey:"set",layoutMode:Ee.e.justified,selectionPreservedOnEmptyClick:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox",checkboxVisibility:2,onItemInvoked:D,onRenderItemColumn:R,className:"locationDetailsList"})]})}),Object(Ge.jsx)(O.a,{isOpen:c,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(tt,{item:y.current,onCancel:s,onSubmit:S})}),Object(Ge.jsx)(O.a,{isOpen:b,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(Ye,{location:y.current,onCancel:h,onSubmit:L})})]})})),jt=Object(x.a)((function(){var e=Object(i.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(i.useCallback)((function(){a(null)}),[]);return Object(Ge.jsx)("div",{className:"locationPageContainer",children:n?Object(Ge.jsx)(ut,{selectedState:n,onNavigateBack:c}):Object(Ge.jsx)(bt,{onSelectedItem:a})})})),ft=(n(171),Object(x.a)((function(){return Object(Ge.jsx)("div",{className:"loginPageContainer",children:Object(Ge.jsxs)("div",{className:"loginContainer",children:[Object(Ge.jsx)("h3",{children:"Data Composer"}),Object(Ge.jsx)(He.a,{text:"Login with Github",onClick:N})]})})}))),ht=(n(172),Object(x.a)((function(e){var t=e.onSubmit,n=e.onCancel,a=e.item,c=e.tagsOptions,o=Object(i.useState)(function(e){return e?{tagKey:e.key.split("/")[1].split(".")[0],key:e.key,qualifier:e.text,isNew:!1}:{tagKey:"",key:"",qualifier:"",isNew:!0}}(a)),r=Object(l.a)(o,2),s=r[0],u=r[1],d=Object(i.useRef)(s),b=Object(i.useRef)(function(){var e=K(),t=e.globalFileData.customStrings.content;return Object.entries(t).filter((function(e){var t=Object(l.a)(e,2),n=t[0];return t[1],n.startsWith("c19.eligibility.question/")})).map((function(t){var n=Object(l.a)(t,2);return n[0],n[1][e.currentLanguage].toLowerCase().replaceAll(" ","")}))}()),j=Object(i.useState)(!1),h=Object(l.a)(j,2),v=h[0],m=h[1],g=Object(i.useState)(!1),p=Object(l.a)(g,2),O=p[0],k=p[1],x=Object(i.useCallback)((function(e,t){d.current=Object(P.a)(Object(P.a)({},d.current),{tagKey:null===t||void 0===t?void 0:t.key}),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,d]),y=Object(i.useCallback)((function(e){var t=e.target.value;d.current=Object(P.a)(Object(P.a)({},d.current),Object(M.a)({},e.target.name,t)),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,d]),C=Object(i.useCallback)((function(e){var t=e.toLowerCase().replaceAll(" ","");return b.current.includes(t)?(m(!0),"Qualifier already exist, please revise."):(m(!1),"")}),[b,m]),N=Object(i.useCallback)((function(e){var t=e.toLowerCase().replaceAll(" ","_");return c.map((function(e){return e.key})).includes(t)?(m(!0),"Tag already exist, please revise."):(m(!1),"")}),[m,c]),w=Object(i.useCallback)((function(){return!!v||""===s.qualifier}),[s,v]),D=Object(i.useCallback)((function(){var e=s.tagKey.replaceAll(" ","_");c.push({key:e,text:s.tagKey}),c.sort((function(e,t){return e.text>t.text?1:-1})),d.current=Object(P.a)(Object(P.a)({},d.current),{tagKey:e}),k(!1),u(Object(P.a)(Object(P.a)({},s),d.current))}),[s,c,d,k]),S=a?"Edit Qualifier":"New Qualifier";return Object(Ge.jsxs)("div",{className:"modalWrapper",children:[Object(Ge.jsx)("div",{className:"modalHeader",children:Object(Ge.jsx)("div",{className:"title",children:S})}),Object(Ge.jsxs)("div",{className:"modalBody",children:[Object(Ge.jsxs)("div",{className:"tagRow",children:[O?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsx)(Ze.a,{name:"tagKey",placeholder:"Type new tag",onChange:y,validateOnLoad:!1,onGetErrorMessage:function(){return N(s.tagKey)}}),Object(Ge.jsx)(Ue.a,{text:"Ok",onClick:function(){return D()}}),Object(Ge.jsx)(He.a,{text:"Cancel",onClick:function(){return k(!1)}})]}):Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsx)(f.a,{selectedKey:s.tagKey,placeholder:"Tag",options:c,onChange:x,disabled:!s.isNew}),s.isNew&&Object(Ge.jsx)(Ue.a,{text:"New tag",onClick:function(){return k(!0)}})]}),Object(Ge.jsx)("div",{})]}),Object(Ge.jsx)(Ze.a,{label:"",name:"qualifier",placeholder:"Qualifier text...",value:s.qualifier,onChange:y,multiline:!0,autoAdjustHeight:!1,resizable:!1,disabled:!s.tagKey||O,validateOnLoad:!1,onGetErrorMessage:function(){return C(s.qualifier)}})]}),Object(Ge.jsxs)("div",{className:"modalFooter",children:[Object(Ge.jsx)(Ue.a,{text:"Submit",disabled:w(),onClick:function(){return null===t||void 0===t?void 0:t(s)}}),Object(Ge.jsx)(He.a,{text:"Cancel",onClick:function(){return null===n||void 0===n?void 0:n()}})]})]})}))),vt=(n(173),Object(x.a)((function(){var e,t=K(),n=t.globalFileData,a=t.currentLanguage,c=t.isEditable,o=t.isDataRefreshing,r=Object(i.useState)([]),s=Object(l.a)(r,2),u=s[0],d=s[1],b=Object(i.useState)([]),j=Object(l.a)(b,2),f=j[0],h=j[1],v=Object(k.a)(!1),m=Object(l.a)(v,2),g=m[0],p=m[1],x=p.setTrue,y=p.setFalse,C=Object(i.useRef)(null);Object(i.useEffect)((function(){if(null===n||void 0===n?void 0:n.customStrings){var e=[],t=[],i=[],c=[],o=n.customStrings.content;Object.keys(o).filter((function(e){return e.includes("eligibility.question")})).sort((function(e,t){return e>t?1:-1})).forEach((function(n){var r=n.split("/")[1].split(".");if(e.includes(r[0])){var s=i.findIndex((function(e){return e.key===r[0]}));i[s].count++}else e.push(r[0]),i.push({key:r[0],name:J(r[0]),startIndex:c.length,count:1,isCollapsed:!0});t.includes(n)||(t.push(n),c.push({key:n,text:o[n][a]?o[n][a]:"*Translation Not Found* (".concat(a,")")}))})),d(i),h(c)}}),[n,a,d,h]);var N=[{key:"questionColKey",name:"Question",fieldName:"text",minWidth:100,isResizable:!1},{key:"editCol",name:"",fieldName:"editQualifier",minWidth:50,isResizable:!1}].filter((function(e){return!!c||"editCol"!==e.key})),w=Object(i.useCallback)((function(e){C.current=null!==e&&void 0!==e?e:null,x()}),[x,C]),D=Object(i.useCallback)((function(e){Se(e),setTimeout((function(){return y()}),100)}),[y]),S=Object(i.useCallback)((function(e,t,n){var a=e[null===n||void 0===n?void 0:n.fieldName];return"editCol"===(null===n||void 0===n?void 0:n.key)?c?Object(Ge.jsx)(_e.a,{iconName:"Edit",className:"editIcon",onClick:function(){return w(e)}}):null:Object(Ge.jsx)("span",{children:a})}),[w,c]),L=u.map((function(e){return{key:e.key,text:e.name}}));return Object(Ge.jsxs)("div",{className:"qualifierPanelContainer",children:[Object(Ge.jsx)("div",{className:"panelHeader",children:Object(Ge.jsx)("div",{className:"panelHeaderTitle",children:"Qualifiers"})}),Object(Ge.jsx)("div",{className:"panelBody",children:!o&&Object(Ge.jsxs)("section",{children:[!!(null===n||void 0===n||null===(e=n.customStrings)||void 0===e?void 0:e.content)&&Object(Ge.jsxs)("div",{className:"searchRow",children:[Object(Ge.jsx)("div",{}),Object(Ge.jsxs)("div",{className:"addQualiferHeaderButton",onClick:function(){return w(null)},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",className:"addQualifierIcon"}),"Add Qualifier"]})]}),Object(Ge.jsx)(qe.a,{items:f,groups:u,columns:N,groupProps:{showEmptyGroups:!1},compact:!0,isHeaderVisible:!1,checkboxVisibility:2,className:"qualifierGroupItem",onRenderItemColumn:S})]})}),Object(Ge.jsx)(O.a,{isOpen:g,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(ht,{item:C.current,tagsOptions:L,onSubmit:D,onCancel:y})})]})}))),mt=n(14),gt=n(45),pt=function(){var e=K(),t=[],n=[],a=[],i=e.globalFileData,c=e.repoFileData;return Object(gt.isEqual)(e.initGlobalFileData.customStrings,i.customStrings)||(t.push({label:"Global strings information updated",value:i.customStrings}),a.push(i.customStrings)),Object(gt.isEqual)(e.initGlobalFileData.cdcStateNames,i.cdcStateNames)||(t.push({label:"State names information updated",value:i.cdcStateNames}),a.push(i.cdcStateNames)),Object(gt.isEqual)(e.initGlobalFileData.cdcStateLinks,i.cdcStateLinks)||(t.push({label:"State links information updated",value:i.cdcStateLinks}),a.push(i.cdcStateLinks)),Object.keys(e.initRepoFileData).filter((function(t){return!e.repoFileData[t]})).forEach((function(a){t.push({label:"Location removed - ".concat(a),value:e.initRepoFileData[a]}),n.push({key:a,data:Object(P.a)(Object(P.a)({},e.initRepoFileData[a]),{},{delete:!0})})})),Object.keys(c).forEach((function(a){if(e.initRepoFileData)if(e.initRepoFileData[a]){var i=!1;Object(gt.isEqual)(e.initRepoFileData[a].info,c[a].info)||(t.push({label:"Updated information for ".concat(a),value:c[a]}),i=!0),Object(gt.isEqual)(e.initRepoFileData[a].regions,c[a].regions)||(t.push({label:"Updated regions for ".concat(a),value:c[a]}),i=!0),Object(gt.isEqual)(e.initRepoFileData[a].vaccination,c[a].vaccination)||(t.push({label:"Updated phase information for ".concat(a),value:c[a]}),i=!0),Object(gt.isEqual)(e.initRepoFileData[a].strings,c[a].strings)||(t.push({label:"Updated strings information for ".concat(a),value:c[a]}),i=!0),i&&n.push({key:a,data:c[a]})}else t.push({label:"New location added - ".concat(a)}),n.push({key:a})})),{globalUpdates:a,locationUpdates:n,changesList:t}},Ot=(n(175),Object(x.a)((function(e){var t=e.showDashboard,n=Object(i.useState)([]),a=Object(l.a)(n,2),c=a[0],o=a[1],r=Object(i.useState)([]),s=Object(l.a)(r,2),d=s[0],b=s[1],j=Object(i.useState)([]),f=Object(l.a)(j,2),h=f[0],v=f[1],m=Object(i.useState)(!1),g=Object(l.a)(m,2),p=g[0],O=g[1],k=Object(i.useState)(),x=Object(l.a)(k,2),y=x[0],C=x[1],N=K(),w=Object(i.useState)(function(e){var t,n;return e?{prTitle:null!==(t=e.title)&&void 0!==t?t:"",prDetails:null!==(n=e.body)&&void 0!==n?n:""}:{prTitle:"",prDetails:""}}(N.loadedPRData)),S=Object(l.a)(w,2),L=S[0],F=S[1],I=Object(i.useRef)(L);Object(i.useEffect)((function(){try{var e=pt(),t=e.globalUpdates,n=e.locationUpdates,a=e.changesList;b(n),o(a),v(t)}catch(i){C(i)}}),[N.initRepoFileData,N.repoFileData,N.initGlobalFileData,N.globalFileData]);var R=Object(i.useCallback)((function(e){var t=e.target.value;I.current=Object(P.a)(Object(P.a)({},I.current),Object(M.a)({},e.target.name,t)),F(Object(P.a)(Object(P.a)({},L),I.current))}),[L,I]),T=Object(i.useCallback)((function(e){(null===e||void 0===e?void 0:e.error)?O(!1):t()}),[t]);return Object(Ge.jsx)("div",{className:"reviewPageContainer",children:Object(Ge.jsxs)("div",{className:"bodyContainer",children:[Object(Ge.jsx)("div",{className:"bodyHeader",children:Object(Ge.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(Ge.jsx)("div",{className:"breadCrumbs",children:"/ Review"}),Object(Ge.jsx)("div",{className:"mainTitle",children:"Review"})]})}),Object(Ge.jsxs)("div",{className:"bodyContent",children:[y&&Object(Ge.jsx)(u.a,{messageBarType:mt.a.error,dismissButtonAriaLabel:"Close",children:Object(Ge.jsxs)("p",{children:["Unexpected ",null===y||void 0===y?void 0:y.toString()]})}),p?Object(Ge.jsx)("section",{className:"loadingContainer",children:Object(Ge.jsx)(Ke.a,{description:"Saving changes..."})}):Object(Ge.jsx)("section",{children:Object(Ge.jsxs)("div",{className:"submitContainer",children:[Object(Ge.jsx)(Ze.a,{label:"Title (Optional):",name:"prTitle",value:L.prTitle,onChange:R}),Object(Ge.jsx)(Ze.a,{label:"Details (Optional):",name:"prDetails",multiline:!0,rows:5,autoAdjustHeight:!0,resizable:!1,value:L.prDetails,onChange:R}),Object(Ge.jsx)(qe.a,{items:c,columns:[{key:"labelCol",name:"Pending Changes",fieldName:"label",minWidth:200,isResizable:!0}],setKey:"set",layoutMode:Ee.e.justified,checkboxVisibility:2}),Object(Ge.jsx)(Ue.a,{text:"Submit changes",onClick:function(){O(!0),D([h,d,T,L])}})]})})]})]})})}))),kt=n(50),xt=n.n(kt),yt=(n(209),{dropdown:{border:"none"},title:{fontSize:"14px",color:"#0078d4 !important",border:"none",backgroundColor:"transparent"},caretDown:{color:"#0078d4 !important",fontSize:"14px"},dropdownOptionText:{fontSize:"14px"}}),Ct=Object(x.a)((function(){var e=K(),t=e.globalFileData,n=e.repoFileData,a=e.currentLanguage,c=e.isDataRefreshing,o=Y(),r=[{key:"missing",text:"Needs Translation"},{key:"all",text:"Show All"}],s=[{key:"all",text:"All"},{key:"state",text:"State-specific"},{key:"state_link",text:"State Links"},{key:"other",text:"Uncategorized"}],d=Object(i.useState)(!1),b=Object(l.a)(d,2),j=b[0],h=b[1],v=Object(i.useRef)({}),m=Object(i.useRef)({}),g=Object(i.useRef)({}),p=Object(i.useRef)([]),O=Object(i.useRef)([]),k=Object(i.useRef)([]),x=Object(i.useRef)([]),y=Object(i.useRef)(a),C=Object(i.useRef)(o[0].key),N=Object(i.createRef)(),w=Object(i.useState)(),D=Object(l.a)(w,2),S=D[0],L=D[1],F=Object(i.useState)([]),I=Object(l.a)(F,2),R=I[0],T=I[1],_=Object(i.useState)([]),A=Object(l.a)(_,2),q=A[0],E=A[1],B=Object(i.useState)([]),W=Object(l.a)(B,2),z=W[0],U=W[1],H=Object(i.useState)(r[0].key),G=Object(l.a)(H,2),V=G[0],$=G[1],X=Object(i.useState)(s[0].key),te=Object(l.a)(X,2),ne=te[0],ae=te[1],ie=Object(i.useState)(""),ce=Object(l.a)(ie,2),oe=ce[0],re=ce[1],se=Object(i.useState)({locations:!1,qualifiers:!1,misc:!1}),le=Object(l.a)(se,2),ue=le[0],de=le[1],be=Object(i.useCallback)((function(){var e=[];if(n){var a=[];Object.entries(n).forEach((function(n){var i,c,o,r,s,u=Object(l.a)(n,2),d=(u[0],u[1]),b=null===d||void 0===d||null===(i=d.info)||void 0===i?void 0:i.content.id,j=null===t||void 0===t?void 0:t.cdcStateNames.content,f=null===t||void 0===t?void 0:t.cdcStateLinks.content,h=j["cdc/".concat(b,"/state_name")]&&j["cdc/".concat(b,"/state_name")][y.current]&&""!==j["cdc/".concat(b,"/state_name")][y.current].trim()?j["cdc/".concat(b,"/state_name")][y.current]:"*Translation Not Found* (".concat(b,")"),v=f["cdc/".concat(b,"/state_link")]&&f["cdc/".concat(b,"/state_link")][y.current]&&""!==f["cdc/".concat(b,"/state_link")][y.current].trim()?f["cdc/".concat(b,"/state_link")][y.current]:"*Translation Not Found* (".concat(b,")"),m=C.current&&(null===j||void 0===j||null===(c=j["cdc/".concat(b,"/state_name")])||void 0===c?void 0:c[C.current])?null===j||void 0===j||null===(o=j["cdc/".concat(b,"/state_name")])||void 0===o?void 0:o[C.current]:"",g=C.current&&(null===f||void 0===f||null===(r=f["cdc/".concat(b,"/state_link")])||void 0===r?void 0:r[C.current])?null===f||void 0===f||null===(s=f["cdc/".concat(b,"/state_link")])||void 0===s?void 0:s[C.current]:"";a.push({key:"cdc/".concat(b,"/state_name"),fromKey:y.current,from:h,toKey:C.current,to:m,_to:m,parent:"global",category:"locations"}),e.push({key:"cdc/".concat(b,"/state_link"),fromKey:y.current,from:v,toKey:C.current,to:g,_to:g,parent:"global",category:"state_link"})})),p.current=a.sort((function(e,t){return e.from>t.from?1:-1}))}if(t){var i=[];Object.entries(t.customStrings.content).forEach((function(t){var n=Object(l.a)(t,2),a=n[0],c=n[1];a.startsWith("c19.eligibility.question")?i.push({key:a,fromKey:y.current,from:c[y.current],toKey:C.current,to:c[C.current],_to:c[C.current],parent:"global",category:"qualifiers"}):e.push({key:a,fromKey:y.current,from:c[y.current],toKey:C.current,to:c[C.current],_to:c[C.current],parent:"global",category:"other"})})),O.current=i.sort((function(e,t){return e.from>t.from?1:-1}))}var c=[];n&&Object.entries(n).filter((function(e){var t=Object(l.a)(e,2);t[0];return t[1].strings})).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];Object.entries(a.strings.content).forEach((function(e){var t=Object(l.a)(e,2),a=t[0],i=t[1];c.push({key:a,fromKey:y.current,from:i[y.current],toKey:C.current,to:i[C.current],_to:i[C.current],parent:n,category:"state"})}))})),k.current=e.concat(c).sort((function(e,t){return e.key>t.key?1:-1}));var o=[],r=[];k.current.forEach((function(e){r.includes(e.parent)||"state"!==e.category||(o.push({key:e.parent,text:J(e.parent)}),r.push(e.parent))})),x.current=o.sort((function(e,t){return e.key>t.key?1:-1}))}),[t,n]);Object(i.useEffect)((function(){y.current=a,be()}),[a,y,be]);var je=Object(i.useCallback)((function(e){de(Object(P.a)(Object(P.a)({},ue),Object(M.a)({},e,!ue[e])))}),[de,ue]),fe=Object(i.useCallback)((function(e,t){var n=e.target.value,a=R.findIndex((function(e){return e.from===t.from}));R[a]=Object(P.a)(Object(P.a)({},t),{},{to:n}),T(Object(Te.a)(R)),v.current=R[a]}),[v,R,T]),he=Object(i.useCallback)((function(e,t){var n=e.target.value,a=q.findIndex((function(e){return e.from===t.from}));q[a]=Object(P.a)(Object(P.a)({},t),{},{to:n}),E(Object(Te.a)(q)),m.current=q[a]}),[m,q,E]),ve=Object(i.useCallback)((function(e,t){var n=e.target.value,a=z.findIndex((function(e){return e.from===t.from}));z[a]=Object(P.a)(Object(P.a)({},t),{},{to:n}),U(Object(Te.a)(z)),g.current=z[a]}),[g,z,U]),me=Object(i.useCallback)((function(e){e.to&&e.to.toLowerCase()!==e._to.toLowerCase()&&(e.to=J(e.to).trim(),Le(e))}),[]),ge=Object(i.useCallback)((function(e){e.to&&e.to.toLowerCase()!==e._to.toLowerCase()&&(e.to=String(e.to).trim(),Fe(e))}),[]),pe=Object(i.useCallback)((function(e){e.to&&e.to.toLowerCase()!==e._to.toLowerCase()&&(e.to=String(e.to).trim(),Ie(e))}),[]),Oe=Object(i.useCallback)((function(e,t){C.current=t.key,be(),"missing"===V?(T(p.current.filter((function(e){return!e._to}))),E(O.current.filter((function(e){return!e._to}))),U("all"===ne?k.current.filter((function(e){return!e._to})):"state"===ne?k.current.filter((function(e){return!e._to&&e.category===ne&&e.parent===oe})):k.current.filter((function(e){return!e._to&&e.category===ne})))):(T(p.current),E(O.current),U("all"===ne?k.current:"state"===ne?k.current.filter((function(e){return e.category===ne&&e.parent===oe})):k.current.filter((function(e){return e.category===ne}))))}),[V,ne,oe,be,T,E,U]),ke=Object(i.useCallback)((function(e,t){"missing"===t.key?(T(p.current.filter((function(e){return!e._to}))),E(O.current.filter((function(e){return!e._to}))),U("all"===ne?k.current.filter((function(e){return!e._to})):"state"===ne?k.current.filter((function(e){return!e._to&&e.category===ne&&e.parent===oe})):k.current.filter((function(e){return!e._to&&e.category===ne})))):(T(p.current),E(O.current),U("all"===ne?k.current:"state"===ne?k.current.filter((function(e){return e.category===ne&&e.parent===oe})):k.current.filter((function(e){return e.category===ne})))),$(t.key)}),[U,T,E,p,O,k,ne,oe,$]),xe=Object(i.useCallback)((function(e,t){var n=oe||x.current[0].key,a=k.current.filter((function(e){return"all"===t.key?"missing"===V?!e._to:e:"missing"===V?"state"===t.key?!e._to&&e.category===t.key&&e.parent===n:!e._to&&e.category===t.key:"state"===t.key?e.category===t.key&&n:e.category===t.key}));U(a),ae(t.key),re(n)}),[k,V,oe,re,U,ae]),ye=Object(i.useCallback)((function(e,t){U(k.current.filter((function(e){return e.parent===t.key}))),re(t.key)}),[U,k]),Ce=function(e){try{var t=e.target.result,n=Q(xt()(t,{columns:!0}));if(!(Object.keys(n).length>0))throw new Error("Invalid File Content.");Pe(n),h(!1)}catch(a){L(a),h(!1)}},Ne=function e(t,n){t.strings&&t.strings.content&&Object.assign(n,t.strings.content),t.regions&&t.regions.length>0&&t.regions.forEach((function(t){e(t,n)}))};return Object(Ge.jsx)("div",{className:"translatePageContainer",children:Object(Ge.jsxs)("div",{className:"bodyContainer",children:[Object(Ge.jsx)("div",{className:"bodyHeader",children:Object(Ge.jsxs)("div",{className:"bodyHeaderTitle",children:[Object(Ge.jsx)("div",{className:"breadCrumbs",children:"/ Translate"}),Object(Ge.jsx)("div",{className:"mainTitle",children:"Translate"})]})}),Object(Ge.jsxs)("div",{className:"bodyContent",children:[S&&Object(Ge.jsx)(u.a,{messageBarType:mt.a.error,dismissButtonAriaLabel:"Close",children:Object(Ge.jsxs)("p",{children:["Unexpected ",null===S||void 0===S?void 0:S.toString()]})}),j||c?Object(Ge.jsx)("section",{className:"loadingContainer",children:Object(Ge.jsx)(Ke.a,{description:c?"Loading content...":"Updating translations..."})}):Object(Ge.jsxs)("section",{children:[Object(Ge.jsxs)("div",{className:"filterGroup",children:[Object(Ge.jsxs)("div",{children:[Object(Ge.jsx)("label",{htmlFor:"availDropdown",children:"Translate from:"}),Object(Ge.jsx)(f.a,{id:"availDropdown",selectedKey:C.current,placeholder:"Available languages",options:o,styles:yt,onChange:Oe}),Object(Ge.jsx)("label",{htmlFor:"translateDropdown",children:"Show:"}),Object(Ge.jsx)(f.a,{id:"translateDropdown",selectedKey:V,placeholder:"Needs Translation",options:r,styles:yt,onChange:ke})]}),Object(Ge.jsxs)("div",{className:"fileOptions",children:[Object(Ge.jsx)("input",{ref:N,type:"file",onChange:function(e){if(L(void 0),e.target.files.length>0){h(!0);var t=e.target.files[0];if("text/csv"===t.type){var n=new FileReader;n.onload=Ce,n.readAsText(t,"UTF-8")}else L(new Error("Invalid File Type.")),h(!1)}}}),Object(Ge.jsxs)("button",{onClick:function(){var e={};Object.assign(e,t.customStrings.content,t.cdcStateNames.content,t.cdcStateLinks.content),Object.keys(n).forEach((function(t){Ne(n[t],e)}));var a=ee(e),i=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(i);window.open(c)},children:[Object(Ge.jsx)(_e.a,{iconName:"Download"}),"Download Template"]}),Object(Ge.jsxs)("button",{onClick:function(){var e;null===(e=N.current)||void 0===e||e.click()},children:[Object(Ge.jsx)(_e.a,{iconName:"CircleAdditionSolid",className:"blue"}),"Upload File"]})]})]}),Object(Ge.jsxs)("div",{className:"listTitle",onClick:function(){return je("locations")},children:[Object(Ge.jsx)(_e.a,{iconName:ue.locations?"ChevronRight":"ChevronDown",className:"groupToggleIcon"}),Object(Ge.jsx)("div",{children:"Locations"})]}),!ue.locations&&(R.length>0?R.map((function(e,t){return Object(Ge.jsxs)("div",{className:"translateListRow".concat(t%2>0?"":" altRow"),children:[Object(Ge.jsx)("div",{className:"fromCol",children:e.from}),Object(Ge.jsx)(Ze.a,{name:e.to,value:e.to,className:"toCol",onChange:function(t){return fe(t,e)},onBlur:function(){return me(e)}})]},"locationRow-".concat(t))})):Object(Ge.jsxs)("div",{className:"emptyTranslateListRow",children:["No missing location translations found for:"," ",Z(C.current,C.current),"."]})),Object(Ge.jsxs)("div",{className:"listTitle",onClick:function(){return je("qualifiers")},children:[Object(Ge.jsx)(_e.a,{iconName:ue.qualifiers?"ChevronRight":"ChevronDown",className:"groupToggleIcon"}),Object(Ge.jsx)("div",{children:"Qualifiers"})]}),!ue.qualifiers&&(q.length>0?q.map((function(e,t){return Object(Ge.jsxs)("div",{className:"translateListRow".concat(t%2>0?"":" altRow"," qualifier"),children:[Object(Ge.jsx)("div",{className:"fromCol",children:e.from}),Object(Ge.jsx)(Ze.a,{name:e.to,value:e.to,className:"toCol",autoAdjustHeight:!0,resizable:!1,multiline:!0,rows:Math.ceil(e.from.length/100),onChange:function(t){return he(t,e)},onBlur:function(){return ge(e)}})]},"qualifierRow-".concat(t))})):Object(Ge.jsxs)("div",{className:"emptyTranslateListRow",children:["No missing qualifier translations found for:"," ",Z(C.current,C.current),"."]})),Object(Ge.jsxs)("div",{className:"listTitle",onClick:function(){return je("misc")},children:[Object(Ge.jsx)(_e.a,{iconName:ue.misc?"ChevronRight":"ChevronDown",className:"groupToggleIcon"}),Object(Ge.jsx)("div",{children:"Miscellaneous"})]}),!ue.misc&&(z.length>0?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsxs)("div",{className:"miscFilterGroup",children:[Object(Ge.jsx)(f.a,{selectedKey:ne,placeholder:"Filter Miscellaneous",options:s,styles:yt,onChange:xe}),"state"===ne?Object(Ge.jsx)(f.a,{selectedKey:oe,options:x.current,styles:yt,onChange:ye}):Object(Ge.jsx)("div",{})]}),z.map((function(e,t){return Object(Ge.jsxs)("div",{className:"translateListRow".concat(t%2>0?"":" altRow"," misc"),children:[Object(Ge.jsx)("div",{className:"fromCol",children:e.from}),Object(Ge.jsx)(Ze.a,{name:e.to,value:e.to,className:"toCol",autoAdjustHeight:!0,resizable:!1,multiline:!0,rows:Math.ceil(e.from.length/100),onChange:function(t){return ve(t,e)},onBlur:function(){return pe(e)}})]},"miscRow-".concat(t))}))]}):Object(Ge.jsxs)("div",{className:"emptyTranslateListRow",children:["No missing miscellaneous translations found for:"," ",Z(C.current,C.current),"."]}))]})]})]})})})),Nt=Object(x.a)((function(){return Object(i.useEffect)((function(){A()}),[]),Object(Ge.jsx)("div",{className:"appBodyLeft",children:Object(Ge.jsxs)("div",{className:"dashboardPageWrapper",children:[Object(Ge.jsx)("div",{className:"bodyContainer",children:Object(Ge.jsx)("div",{className:"bodyHeader",children:Object(Ge.jsx)("div",{className:"bodyHeaderTitle",children:Object(Ge.jsx)("div",{className:"mainTitle",children:"Welcome!"})})})}),Object(Ge.jsx)("section",{style:{width:"70%",margin:"0px auto"},children:Object(Ge.jsxs)("p",{children:["Thank you for your interest in helping to manage the data, unfortunately right now access to this tool requires collaborator permissions on"," ",Object(Ge.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.github.com/".concat("microsoft","/").concat("covid-vaccine-bot"),children:"this repo"}),". Feel free to request access over on GitHub!"]})})]})})})),wt=Object(x.a)((function(e){var t=e.onSubmit,n=K().pendingChanges;return Object(Ge.jsxs)("div",{className:"modalWrapper",children:[Object(Ge.jsx)("div",{className:"modalHeader",children:Object(Ge.jsx)("div",{className:"title",children:"Session Expired"})}),Object(Ge.jsx)("div",{className:"modalBody",children:Object(Ge.jsx)("p",{children:"Please log back in with Github to continue working."})}),Object(Ge.jsxs)("div",{className:"modalFooter",children:[Object(Ge.jsx)(Ue.a,{text:"Continue Working",onClick:t}),!n&&Object(Ge.jsx)(He.a,{text:"Logout",onClick:G})]})]})})),Dt=(n(210),n(211),Object(x.a)((function(){var e=K(),t=Object(k.a)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],o=c.setTrue,r=c.setFalse,s=Object(k.a)(!1),x=Object(l.a)(s,2),C=x[0],D=x[1],S=D.setTrue,F=D.setFalse,I=Object(i.useState)(!1),P=Object(l.a)(I,2),T=P[0],_=P[1],A=Object(k.a)(!1),q=Object(l.a)(A,2),E=q[0],B=q[1],W=B.setTrue,z=B.setFalse,U=Object(i.useState)("Dashboard"),H=Object(l.a)(U,2),M=H[0],Q=H[1],J=Object(i.useRef)(null);Object(i.useEffect)((function(){e.accessToken&&!e.globalFileData&&N()}),[e.accessToken,e.globalFileData]),Object(i.useEffect)((function(){e.userAccessExpired&&W()}),[e.userAccessExpired,W]),Object(i.useEffect)((function(){e.pendingChanges?window.onbeforeunload=function(){return!0}:window.onbeforeunload=null}),[e.pendingChanges]);var V=Object(i.useCallback)((function(e){"Locations"===e.props.headerText?o():r(),Q(e.props.headerText)}),[o,r,Q]),Z=Object(i.useCallback)((function(){Q("Dashboard")}),[Q]),$=Object(i.useCallback)((function(){e.globalFileData?w():N(),z()}),[e.globalFileData,z]),X=function(){var t,n,a,i;return e.loadedPRData&&e.prChanges&&!e.isDataRefreshing?Object(Ge.jsxs)(u.a,{messageBarType:5,isMultiline:!0,styles:{root:{margin:"10px 5px"}},children:["You are currently working on:"," ",Object(Ge.jsxs)("strong",{children:["PR: ",e.loadedPRData.number," - ",e.loadedPRData.title]}),Object(Ge.jsx)("br",{}),"Last updated by:"," ",null===(t=e.prChanges)||void 0===t||null===(n=t.last_commit)||void 0===n||null===(a=n.commit)||void 0===a||null===(i=a.committer)||void 0===i?void 0:i.name,Object(Ge.jsx)("br",{}),"Last updated on:"," ",new Date(e.loadedPRData.updated_at).toLocaleString()]}):null},ee=function(){return e.pendingChanges?Object(Ge.jsx)(u.a,{styles:{root:{margin:"10px 5px"}},actions:e.loadedPRData?void 0:Object(Ge.jsx)("div",{children:e.isSavingCommits?Object(Ge.jsx)(b.a,{label:"Saving changes...",ariaLive:"assertive",labelPosition:"left"}):Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsx)(d.a,{disabled:e.isDataRefreshing,onClick:L,children:"Discard"}),Object(Ge.jsx)(d.a,{disabled:e.isDataRefreshing,onClick:function(){_(!0),R()},children:"Save and Continue"})]})}),children:"You have pending changes, please click on the review tab to submit these changes."}):e.userWorkingBranch?Object(Ge.jsxs)(u.a,{messageBarType:4,styles:{root:{margin:"10px 5px"}},children:[T?"Your changes have been saved  to":"You are now working on branch "," ",e.userWorkingBranch,", ",Object(Ge.jsx)("br",{}),"please click on the review tab to submit these changes."]}):null};return Object(Ge.jsxs)("div",{className:"rootContentWrapper",children:[e.isAuthenticated?Object(Ge.jsx)(Ge.Fragment,{children:Object(Ge.jsxs)(y.d,{children:[Object(Ge.jsxs)(y.b,{exact:!0,path:"/",children:[Object(Ge.jsxs)("div",{className:"appPageContainer",children:[Object(Ge.jsxs)("div",{className:"appHeaderWrapper",children:[Object(Ge.jsxs)("div",{className:"appHeaderContainer",children:[Object(Ge.jsx)(j.a,{iconProps:{iconName:"waffle"},title:"Apps",styles:{icon:{fontSize:"24px",color:"white"},rootHovered:{backgroundColor:"transparent"},rootPressed:{backgroundColor:"transparent"}}}),Object(Ge.jsx)("div",{className:"appHeaderTitle",children:"Data Composer"})]}),Object(Ge.jsxs)("div",{className:"appHeaderPersona",children:[Object(Ge.jsx)("div",{children:Object(Ge.jsx)(f.a,{defaultSelectedKey:e.currentLanguage,onChange:function(e,t){return je(t)},ariaLabel:"Pick Language",options:Y(),styles:{dropdown:{border:"none"},title:{fontSize:"14px",color:"white !important",border:"none",backgroundColor:"transparent"},caretDown:{color:"white !important",fontSize:"14px"},dropdownOptionText:{fontSize:"14px"},root:{selectors:{":hover":{backgroundColor:"rgba(0,0,0,.25);"}}}}})}),Object(Ge.jsxs)("div",{ref:J,onClick:S,className:"appHeaderPersonaDetails",children:[Object(Ge.jsx)("div",{className:"appHeaderUsername",children:e.userDisplayName}),Object(Ge.jsx)(h.a,{text:e.userDisplayName,size:v.c.size32,hidePersonaDetails:!0})]}),Object(Ge.jsx)(m.a,{items:[{key:"logoutUserPersonaMenu",text:"Logout",onClick:function(){G()}}],hidden:!C,target:J,onItemClick:F,onDismiss:F})]})]}),Object(Ge.jsx)("div",{className:"appBodyWrapper",children:e.isAuthorized?Object(Ge.jsxs)(Ge.Fragment,{children:[Object(Ge.jsx)("div",{className:"appBodyLeft",children:Object(Ge.jsxs)(g.a,{onLinkClick:V,selectedKey:M,children:[Object(Ge.jsxs)(p.a,{headerText:"Dashboard",itemKey:"Dashboard",children:[ee(),X(),Object(Ge.jsx)(Me,{})]}),Object(Ge.jsxs)(p.a,{headerText:"Locations",itemKey:"Locations",children:[ee(),X(),Object(Ge.jsx)(jt,{})]}),e.isEditable&&Object(Ge.jsxs)(p.a,{headerText:"Translate",itemKey:"Translate",children:[ee(),X(),Object(Ge.jsx)(Ct,{})]}),(e.pendingChanges||e.userWorkingBranch)&&Object(Ge.jsx)(p.a,{headerText:"Review",itemKey:"Review",children:Object(Ge.jsx)(Ot,{showDashboard:Z})})]})}),e.isEditable&&a&&Object(Ge.jsx)("div",{className:"appBodyRight",children:Object(Ge.jsx)(vt,{})})]}):Object(Ge.jsx)(Nt,{})})]}),Object(Ge.jsx)(O.a,{isOpen:E,isModeless:!1,isDarkOverlay:!0,isBlocking:!1,children:Object(Ge.jsx)(wt,{onSubmit:$})})]}),Object(Ge.jsx)(y.b,{path:"*",children:Object(Ge.jsx)("div",{children:"404 page not found."})})]})}):Object(Ge.jsxs)(y.d,{children:[Object(Ge.jsx)(y.b,{exact:!0,path:"/",children:Object(Ge.jsx)(ft,{})}),Object(Ge.jsx)(y.b,{path:"*",children:Object(Ge.jsx)(y.a,{to:"/"})})]}),Object(Ge.jsx)(Qe,{})]})}))),St=n(13),Lt=n.n(St),Ft=n(22),It=n(107),Rt=(n(217),It.a.initializeApp({apiKey:"AIzaSyDWHG36x0EjPRf8zdw9t439_jHPkJRNc3I",authDomain:"covid-vaccine-data-app.firebaseapp.com"})),Pt=function(){var e=Object(Ft.a)(Lt.a.mark((function e(){var t,n,a,i,c,o,r;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,(n=new It.a.auth.GithubAuthProvider).addScope("repo"),e.next=5,Rt.auth().signInWithPopup(n);case 5:return(a=e.sent)&&(r=a.credential,t={isAuthenticated:!0,accessToken:r.accessToken,email:null===(i=a.user)||void 0===i?void 0:i.email,userDisplayName:null===(c=a.user)||void 0===c?void 0:c.displayName,username:null===(o=a.additionalUserInfo)||void 0===o?void 0:o.username}),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tt=n(141),_t=n(139),At="microsoft",qt="covid-vaccine-bot",Et=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=t.split("/"),i=e;a.length>1;){var c=a,o=Object(_t.a)(c),r=o[0],s=o.slice(1);a=s,void 0===i[r]&&(i[r]={}),i=i[r]}return i[a[0]]?i[a[0]]=Object(P.a)(Object(P.a)({},i[a[0]]),n):i[a[0]]={},e},Kt=function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,a,i,c,o,r,s,l,u,d,b=arguments;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>1&&void 0!==b[1]?b[1]:{},a=n.headers,i=n.json,c=void 0===i||i,o=Object(Tt.a)(n,["headers","json"]),r=K(),s=r.accessToken,l=t.startsWith("https://api.github.com/")?t:"https://api.github.com/repos/".concat(At,"/").concat(qt,"/").concat(t),e.next=6,fetch(l,Object(P.a)({method:"GET",headers:Object(P.a)({Authorization:"token ".concat(s)},a)},o));case 6:if(!1!==(u=e.sent).ok){e.next=11;break}throw d=Object.assign(new Error,{status:u.status,ok:u.ok}),console.log("error",d),d;case 11:if(!c){e.next=17;break}return e.next=14,u.json();case 14:return e.abrupt("return",e.sent);case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(Ft.a)(Lt.a.mark((function e(t,n){var a,i;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t),{method:"GET",headers:{Authorization:"token ".concat(n)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(Ft.a)(Lt.a.mark((function e(t,n){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.mainBranch){e.next=6;break}return e.next=3,Kt("git/refs",{method:"POST",body:JSON.stringify({ref:n,sha:t.mainBranch.commit.sha})});case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zt=function(){var e=Object(Ft.a)(Lt.a.mark((function e(t,n,a,i){var c,o,r,s,l,u,d,b,j,f,h,v,m,g,p,O,k,x,y,C,N,w;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="",!a){e.next=14;break}e.t0=Lt.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=14;break}return o=e.t1.value,r=a[o],s=ee(r.content),l="contents/packages/plans/data/localization/".concat(r.path),e.next=10,Kt(l,{method:"PUT",body:JSON.stringify({branch:n,message:"updated ".concat(r.path),content:$(s),sha:r.sha})});case 10:u=e.sent,c=u.commit.sha,e.next=3;break;case 14:if(!i){e.next=55;break}d={},e.t2=Lt.a.keys(i);case 17:if((e.t3=e.t2()).done){e.next=54;break}return b=e.t3.value,j=i[b].data,f="contents/packages/plans/data/policies/".concat(j.info.path),h=j.delete?"DELETE":"PUT",v=j.delete?"deleted":"updated",m=j.delete?void 0:{info:$(JSON.stringify(j.info.content,null,"\t")),vaccination:$(JSON.stringify(j.vaccination.content,null,"\t")),strings:$(ee(j.strings.content))},e.next=26,Kt(f,{method:h,body:JSON.stringify({branch:n,message:"".concat(v," ").concat(j.info.path),content:null===m||void 0===m?void 0:m.info,sha:j.info.sha})});case 26:return d=e.sent,g="contents/packages/plans/data/policies/".concat(j.vaccination.path),e.next=30,Kt(g,{method:h,body:JSON.stringify({branch:n,message:"".concat(v," ").concat(j.vaccination.path),content:null===m||void 0===m?void 0:m.vaccination,sha:j.vaccination.sha})});case 30:return d=e.sent,p="contents/packages/plans/data/policies/".concat(j.strings.path),e.next=34,Kt(p,{method:h,body:JSON.stringify({branch:n,message:"".concat(v," ").concat(j.strings.path),content:null===m||void 0===m?void 0:m.strings,sha:j.strings.sha})});case 34:if(d=e.sent,!j.regions){e.next=52;break}O=Object.keys(j.regions),k=0,x=O;case 38:if(!(k<x.length)){e.next=52;break}return y=x[k],C=j.regions[y],N="contents/packages/plans/data/policies/".concat(C.info.path),e.next=44,Kt(N,{method:h,body:JSON.stringify({branch:n,message:"".concat(v," ").concat(C.info.path),content:j.delete?void 0:$(JSON.stringify(C.info.content,null,"\t")),sha:C.info.sha})});case 44:return d=e.sent,w="contents/packages/plans/data/policies/".concat(C.vaccination.path),e.next=48,Kt(w,{method:h,body:JSON.stringify({branch:n,message:"".concat(v," ").concat(C.vaccination.path),content:j.delete?void 0:$(JSON.stringify(C.vaccination.content,null,"\t")),sha:C.vaccination.sha})});case 48:d=e.sent;case 49:k++,e.next=38;break;case 52:e.next=17;break;case 54:c=d.commit.sha;case 55:return e.abrupt("return",c);case 56:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,a,i,c,o,r,s,l,u,d,b,j,f,h,v,m,g,p,O,k,x,y,C,N,w,D,S,L,F,I,R,P,T,_=arguments;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_.length>1&&void 0!==_[1]?_[1]:void 0,e.prev=1,a=K(),i="refs/heads/".concat(a.username,"-policy-").concat(Date.now()),e.t0=t,e.next="checkAccess"===e.t0?7:"getBranches"===e.t0?10:"getUserWorkingBranches"===e.t0?13:"getUserPullRequests"===e.t0?20:"getPullRequests"===e.t0?27:"getIssues"===e.t0?34:"getRepoFileData"===e.t0?37:"createWorkingBranch"===e.t0?74:"commitChanges"===e.t0?79:"createPR"===e.t0?84:118;break;case 7:return e.next=9,Kt("collaborators/".concat(a.username),{headers:{Accept:"application/vnd.github.v3+json"},json:!1});case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,Kt("branches");case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,Ut("getUserPullRequests");case 15:return c=e.sent,o=n[0],r=o.filter((function(e){return e.name.split("-policy-")[0]===a.username})),s=r.filter((function(e){return!c.find((function(t){var n;return(null===t||void 0===t||null===(n=t.head)||void 0===n?void 0:n.ref)===e.name}))})).sort((function(e,t){return e.name>t.name?-1:1})),e.abrupt("return",s);case 20:return e.next=22,Kt("issues?creator=".concat(a.username));case 22:return l=e.sent,e.next=25,Promise.all(l.map(function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt("pulls/".concat(t.number)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 25:return u=e.sent,e.abrupt("return",u);case 27:return e.next=29,Kt("pulls/".concat(n));case 29:return d=e.sent,e.next=32,Kt("pulls/".concat(n,"/commits"));case 32:return b=e.sent,e.abrupt("return",{data:d,commits:b});case 34:return e.next=36,Kt("issues");case 36:return e.abrupt("return",e.sent);case 37:return j=n?"contents/packages/plans/data?ref=".concat(n):"contents/packages/plans/data",e.next=40,Kt(j);case 40:return f=e.sent,h=f.find((function(e){return"policies"===e.name})).git_url,e.next=44,Kt("".concat(h,"?recursive=true"));case 44:return v=e.sent,m={},v.tree.forEach(function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,i,c,o,r,s;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("tree"!==t.type){e.next=4;break}Et(m,t.path),e.next=22;break;case 4:return n=t.path.lastIndexOf("/"),i=t.path.substring(0,n),c=t.path.substring(n+1),o=c.split(".")[0],r={},e.next=11,Bt(String(t.url),String(a.accessToken));case 11:s=e.sent,e.t0=c.split(".")[1].toLowerCase(),e.next="json"===e.t0?15:"md"===e.t0?17:"csv"===e.t0?19:21;break;case 15:return r[o]={name:c,type:o,sha:t.sha,url:t.url,path:t.path,content:JSON.parse(X(s.content))},e.abrupt("break",21);case 17:return r.desc_md={name:c,type:o,sha:t.sha,url:t.url,path:t.path,content:X(s.content)},e.abrupt("break",21);case 19:return r.strings={name:c,type:o,sha:t.sha,url:t.url,path:t.path,content:Q(xt()(X(s.content),{columns:!0}))},e.abrupt("break",21);case 21:r!=={}&&Et(m,i,r);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=f.find((function(e){return"localization"===e.name})).git_url,e.next=51,Kt("".concat(g,"?recursive=true"));case 51:return p=e.sent,O=p.tree.find((function(e){return"custom-strings.csv"===e.path})),k=p.tree.find((function(e){return"cdc-state-names.csv"===e.path})),x=p.tree.find((function(e){return"cdc-state-links.csv"===e.path})),y={},C={},N={},e.next=60,Bt(String(O.url),String(a.accessToken));case 60:return w=e.sent,y=Q(xt()(X(w.content),{columns:!0})),e.next=64,Bt(String(k.url),String(a.accessToken));case 64:return D=e.sent,C=Q(xt()(X(D.content),{columns:!0})),e.next=68,Bt(String(x.url),String(a.accessToken));case 68:return S=e.sent,N=Q(xt()(X(S.content),{columns:!0})),O.content=y,k.content=C,x.content=N,e.abrupt("return",[m,O,k,x]);case 74:if(!(null===a||void 0===a?void 0:a.mainBranch)){e.next=78;break}return e.next=77,Wt(a,i);case 77:return e.abrupt("return",e.sent);case 78:return e.abrupt("break",118);case 79:if(!n){e.next=83;break}return e.next=82,zt(a,n.branchName,n.globalUpdates,n.locationUpdates);case 82:return e.abrupt("return",e.sent);case 83:return e.abrupt("break",118);case 84:if(!(null===a||void 0===a?void 0:a.mainBranch)){e.next=117;break}if(L=n[0],F=n[1],I=n[3],!a.loadedPRData){e.next=92;break}i="refs/heads/".concat(a.loadedPRData.head.ref),e.next=98;break;case 92:if(!a.userWorkingBranch){e.next=96;break}i="refs/heads/".concat(a.userWorkingBranch),e.next=98;break;case 96:return e.next=98,Wt(a,i);case 98:if(!a.pendingChanges){e.next=101;break}return e.next=101,zt(a,i,L,F);case 101:if(R="",a.loadedPRData){e.next=112;break}return R=I.prTitle?I.prTitle:"auto PR creation",e.next=106,Kt("pulls",{method:"POST",body:JSON.stringify({head:i,base:"main",title:R,body:I.prDetails})});case 106:return P=e.sent,e.next=109,Kt("issues/".concat(P.number,"/labels"),{method:"POST",body:JSON.stringify({labels:["data-composer-submission","requires-data-accuracy-review"]})});case 109:return e.abrupt("return",P);case 112:return R=I.prTitle?I.prTitle:a.loadedPRData.title,T=I.prDetails?I.prDetails:a.loadedPRData.body,e.next=116,Kt("pulls/".concat(a.loadedPRData.number),{method:"PATCH",body:JSON.stringify({title:R,body:T})});case 116:return e.abrupt("return",a.loadedPRData);case 117:return e.abrupt("break",118);case 118:return e.abrupt("return",void 0);case 121:return e.prev=121,e.t1=e.catch(1),e.abrupt("return",e.t1);case 124:case"end":return e.stop()}}),e,null,[[1,121]])})));return function(t){return e.apply(this,arguments)}}();Object(C.orchestrator)(N,Object(Ft.a)(Lt.a.mark((function e(){var t,n,a;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=K()).accessToken){e.next=6;break}t={accessToken:n.accessToken,email:n.email,isAuthenticated:n.isAuthenticated,userDisplayName:n.userDisplayName,username:n.username},e.next=9;break;case 6:return e.next=8,Pt();case 8:t=e.sent;case 9:if(!t){e.next=15;break}return z(t),e.next=13,Ut("checkAccess");case 13:(a=e.sent).ok?L():401===a.status?(U(!0),W()):H();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.warn("Error logging in",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))),Object(C.orchestrator)(w,Object(Ft.a)(Lt.a.mark((function e(){var t;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,te(!0),e.next=4,Pt();case 4:if(t=e.sent,U(!1),!t){e.next=12;break}return z(t),e.next=10,Ut("checkAccess");case 10:e.sent.ok||H();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.warn("Error logging in",e.t0);case 17:return e.prev=17,te(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])}))));var Ht=function(e,t){switch(e.status){case 401:U(!0),W();break;case"DATA_IS_STALE":case 422:ne(!0)}ie(!1),null===t||void 0===t||t()};Object(C.orchestrator)(D,function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,a,i,c;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileData,e.next=3,Ut("createPR",n);case 3:if(!1!==(a=e.sent).ok){e.next=8;break}Ht(a,(function(){return n[2]({error:!0})})),e.next=28;break;case 8:return i=K(),c=i.userWorkingBranches.filter((function(e){return e.name!==i.userWorkingBranch})),e.next=12,Ut("getBranches");case 12:return a=e.sent,ce(a),e.next=16,Ut("getUserWorkingBranches",[a]);case 16:return a=e.sent,oe(c),le(void 0),e.next=21,Ut("getRepoFileData");case 21:return a=e.sent,be(a),e.next=25,Ut("getIssues");case 25:a=e.sent,re(a,n[2]()),ue();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(C.orchestrator)(S,Object(Ft.a)(Lt.a.mark((function e(){var t;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut("getRepoFileData");case 2:t=e.sent,be(t);case 4:case"end":return e.stop()}}),e)})))),Object(C.orchestrator)(L,Object(Ft.a)(Lt.a.mark((function e(){var t,n;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),le(void 0),ue(),ne(!1),e.next=6,Ut("getBranches");case 6:if(!1!==(t=e.sent).ok){e.next=10;break}return Ht(t),e.abrupt("return");case 10:return ce(t),e.next=13,Ut("getUserWorkingBranches",[t]);case 13:if(n=e.sent,!1!==t.ok){e.next=17;break}return Ht(t),e.abrupt("return");case 17:return oe(n),e.next=20,Ut("getRepoFileData");case 20:if(!1!==(t=e.sent).ok){e.next=24;break}return Ht(t),e.abrupt("return");case 24:return be(t),e.next=27,Ut("getIssues");case 27:if(!1!==(t=e.sent).ok){e.next=31;break}return Ht(t),e.abrupt("return");case 31:re(t),te(!1);case 33:case"end":return e.stop()}}),e)})))),Object(C.orchestrator)(I,function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,a;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.branch,te(!0),e.next=4,Ut("getRepoFileData","refs/heads/".concat(n.name));case 4:!1===(a=e.sent).ok?Ht(404===a.status?Object(P.a)(Object(P.a)({},a),{},{status:"DATA_IS_STALE"}):a):(le(n.name),de(a),ue()),te(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(C.orchestrator)(F,function(){var e=Object(Ft.a)(Lt.a.mark((function e(t){var n,a,i;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.prNumber,te(!0),!n){e.next=15;break}return e.next=5,Ut("getPullRequests",n);case 5:if(!1!==(a=e.sent).ok){e.next=9;break}return Ht(a),e.abrupt("return");case 9:return se(a),e.next=12,Ut("getRepoFileData",a.data.head.ref);case 12:!1===(i=e.sent).ok&&de(i),le(void 0);case 15:te(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(C.orchestrator)(R,Object(Ft.a)(Lt.a.mark((function e(){var t,n,a,i;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),t=K(),n=pt(),a=t.userWorkingBranch){e.next=13;break}return e.next=7,Ut("createWorkingBranch");case 7:if(!1!==(i=e.sent).ok){e.next=11;break}return Ht(i),e.abrupt("return");case 11:a=i.ref.split("refs/heads/").join(""),le(a);case 13:return e.next=15,Ut("commitChanges",Object(P.a)(Object(P.a)({},n),{},{branchName:"refs/heads/".concat(a)}));case 15:if(!1!==(i=e.sent).ok){e.next=20;break}Ht(i),e.next=24;break;case 20:return e.next=22,Ut("getRepoFileData",i);case 22:!1===(i=e.sent).ok?Ht(i):(de(i),ae(!1));case 24:ie(!1);case 25:case"end":return e.stop()}}),e)})))),function(){try{Object(a.a)(),r.a.render(Object(Ge.jsx)(c.a.StrictMode,{children:Object(Ge.jsx)(s.a,{basename:"/covid-vaccine-bot",children:Object(Ge.jsx)(Dt,{})})}),document.getElementById("root"))}catch(e){console.error("error rendering app",e)}}()},74:function(e,t,n){},75:function(e,t,n){}},[[219,1,2]]]);
//# sourceMappingURL=main.271a799c.chunk.js.map